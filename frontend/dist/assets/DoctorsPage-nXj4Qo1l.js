import{r as e,j as s}from"./ui-77ih3y5-.js";import{u as a}from"./useQuery-Dlp3A4Ud.js";import{x as i,y as l,j as t,k as r,l as c,z as n,X as o,m as d,I as m,E as x,P as u,G as h,J as p,D as j}from"./index-Dujr78kO.js";import{u as v}from"./useMutation-DHGRmv7m.js";import{L as g}from"./label-l12jvvxt.js";import{T as y}from"./textarea-DP8UPA2I.js";import{b as N}from"./client-B8Nu1JAV.js";import{m as f}from"./animations-B6zYn4RS.js";import{S as b}from"./square-pen-DnvHHSTd.js";import{T as w}from"./trash-2-CfuxWZSG.js";import"./vendor-DZByZrCh.js";import"./charts-BdQpHC93.js";function F({doctor:a,onClose:x,onSuccess:u}){var h,p;const{t:j}=i(),{toast:f}=l(),b=!!a,[w,F]=e.useState({firstName:(null==a?void 0:a.firstName)||"",lastName:(null==a?void 0:a.lastName)||"",email:(null==a?void 0:a.email)||"",phone:(null==a?void 0:a.phone)||"",specialization:(null==a?void 0:a.specialization)||"",licenseNumber:(null==a?void 0:a.licenseNumber)||"",experience:(null==(h=null==a?void 0:a.experience)?void 0:h.toString())||"",qualification:(null==a?void 0:a.qualification)||"",consultationFee:(null==(p=null==a?void 0:a.consultationFee)?void 0:p.toString())||"",availability:(null==a?void 0:a.availability)||"",bio:(null==a?void 0:a.bio)||"",profileImage:(null==a?void 0:a.profileImage)||""}),q=v({mutationFn:async e=>await N.clinic.createDoctor(e),onSuccess:()=>{u()},onError:e=>{f({title:j("common.error"),description:"Failed to create doctor",variant:"destructive"})}}),C=v({mutationFn:async e=>await N.clinic.updateDoctor(e),onSuccess:()=>{u()},onError:e=>{f({title:j("common.error"),description:"Failed to update doctor",variant:"destructive"})}}),z=(e,s)=>{F(a=>({...a,[e]:s}))},S=q.isPending||C.isPending;return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:e=>e.target===e.currentTarget&&x(),children:s.jsx("div",{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:s.jsxs(t,{children:[s.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[s.jsx(c,{className:"text-xl",children:b?"Edit Doctor":j("doctors.add")}),s.jsx(n,{variant:"ghost",size:"sm",onClick:x,children:s.jsx(o,{className:"w-4 h-4"})})]}),s.jsx(d,{children:s.jsxs("form",{onSubmit:async e=>{e.preventDefault();const s={...w,experience:parseInt(w.experience),consultationFee:parseFloat(w.consultationFee)};b&&a?C.mutate({id:a.id,...s}):q.mutate(s)},className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(g,{htmlFor:"firstName",children:j("patients.firstName")}),s.jsx(m,{id:"firstName",value:w.firstName,onChange:e=>z("firstName",e.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(g,{htmlFor:"lastName",children:j("patients.lastName")}),s.jsx(m,{id:"lastName",value:w.lastName,onChange:e=>z("lastName",e.target.value),required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(g,{htmlFor:"email",children:j("common.email")}),s.jsx(m,{id:"email",type:"email",value:w.email,onChange:e=>z("email",e.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(g,{htmlFor:"phone",children:j("common.phone")}),s.jsx(m,{id:"phone",value:w.phone,onChange:e=>z("phone",e.target.value),required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(g,{htmlFor:"specialization",children:j("doctors.specialization")}),s.jsx(m,{id:"specialization",value:w.specialization,onChange:e=>z("specialization",e.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(g,{htmlFor:"licenseNumber",children:j("doctors.licenseNumber")}),s.jsx(m,{id:"licenseNumber",value:w.licenseNumber,onChange:e=>z("licenseNumber",e.target.value),required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(g,{htmlFor:"experience",children:j("doctors.experience")}),s.jsx(m,{id:"experience",type:"number",min:"0",value:w.experience,onChange:e=>z("experience",e.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(g,{htmlFor:"consultationFee",children:j("doctors.consultationFee")}),s.jsx(m,{id:"consultationFee",type:"number",min:"0",step:"0.01",value:w.consultationFee,onChange:e=>z("consultationFee",e.target.value),required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(g,{htmlFor:"qualification",children:j("doctors.qualification")}),s.jsx(m,{id:"qualification",value:w.qualification,onChange:e=>z("qualification",e.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(g,{htmlFor:"availability",children:j("doctors.availability")}),s.jsx(m,{id:"availability",value:w.availability,onChange:e=>z("availability",e.target.value),placeholder:"e.g., Mon-Fri 9AM-5PM",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(g,{htmlFor:"bio",children:j("doctors.bio")}),s.jsx(y,{id:"bio",value:w.bio,onChange:e=>z("bio",e.target.value),placeholder:"Enter doctor's bio..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(g,{htmlFor:"profileImage",children:"Profile Image URL"}),s.jsx(m,{id:"profileImage",type:"url",value:w.profileImage,onChange:e=>z("profileImage",e.target.value),placeholder:"https://example.com/image.jpg"})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx(n,{type:"submit",disabled:S,className:"flex-1",children:j(S?"common.loading":"common.save")}),s.jsx(n,{type:"button",variant:"outline",onClick:x,disabled:S,children:j("common.cancel")})]})]})})]})})})}function q(){const{t:o}=i(),{toast:g}=l(),y=x(),[q,C]=e.useState(""),[z,S]=e.useState(!1),[D,k]=e.useState(null),{data:I,isLoading:E,error:M}=a({queryKey:["doctors",q],queryFn:async()=>await N.clinic.listDoctors({search:q||void 0,limit:100})}),P=v({mutationFn:async e=>{await N.clinic.deleteDoctor({id:e})},onSuccess:()=>{y.invalidateQueries({queryKey:["doctors"]}),g({title:o("common.success"),description:"Doctor deleted successfully"})},onError:e=>{g({title:o("common.error"),description:"Failed to delete doctor",variant:"destructive"})}}),L=()=>{S(!1),k(null)};return M?s.jsx("div",{className:"text-center py-12",children:s.jsxs("p",{className:"text-red-600",children:[o("common.error"),": ",M.message]})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:o("doctors.title")}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage doctor profiles and information"})]}),s.jsxs(n,{onClick:()=>S(!0),className:"flex items-center gap-2",children:[s.jsx(u,{className:"w-4 h-4"}),o("doctors.add")]})]}),s.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"flex items-center gap-4",children:s.jsxs("div",{className:"relative flex-1 max-w-md",children:[s.jsx(h,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx(m,{placeholder:o("common.search"),value:q,onChange:e=>C(e.target.value),className:"pl-10"})]})}),E?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,a)=>s.jsxs(t,{className:"animate-pulse",children:[s.jsxs(r,{children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]}),s.jsx(d,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"h-3 bg-gray-200 rounded"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})})]},a))}):s.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:null==I?void 0:I.doctors.map((e,a)=>s.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*a},whileHover:{y:-2},children:s.jsxs(t,{className:"h-full transition-all duration-200 hover:shadow-md",children:[s.jsx(r,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(p,{className:"w-5 h-5 text-green-600"})}),s.jsxs("div",{children:[s.jsxs(c,{className:"text-lg",children:["Dr. ",e.firstName," ",e.lastName]}),s.jsx("p",{className:"text-sm text-gray-600",children:e.specialization})]})]}),s.jsxs(j,{variant:"outline",className:"text-xs",children:[e.experience,"y exp"]})]})}),s.jsxs(d,{className:"space-y-3",children:[s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{className:"text-gray-600",children:[o("common.email"),":"]}),s.jsx("span",{className:"text-right truncate",children:e.email})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{className:"text-gray-600",children:[o("common.phone"),":"]}),s.jsx("span",{children:e.phone})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Fee:"}),s.jsxs("span",{className:"font-medium",children:["â‚¹",e.consultationFee]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"License:"}),s.jsx("span",{className:"text-right text-xs",children:e.licenseNumber})]})]}),e.bio&&s.jsx("p",{className:"text-xs text-gray-600 line-clamp-2",children:e.bio}),s.jsxs("div",{className:"flex gap-2 pt-2",children:[s.jsxs(n,{variant:"outline",size:"sm",onClick:()=>(e=>{k(e),S(!0)})(e),className:"flex-1",children:[s.jsx(b,{className:"w-3 h-3 mr-1"}),o("common.edit")]}),s.jsx(n,{variant:"outline",size:"sm",onClick:()=>(async e=>{window.confirm("Are you sure you want to delete this doctor?")&&P.mutate(e)})(e.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:s.jsx(w,{className:"w-3 h-3"})})]})]})]})},e.id))}),0===(null==I?void 0:I.doctors.length)&&!E&&s.jsxs(f.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[s.jsx(p,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No doctors found"}),s.jsx("p",{className:"text-gray-600 mb-4",children:q?"Try adjusting your search terms":"Get started by adding your first doctor"}),s.jsxs(n,{onClick:()=>S(!0),children:[s.jsx(u,{className:"w-4 h-4 mr-2"}),o("doctors.add")]})]}),z&&s.jsx(F,{doctor:D,onClose:L,onSuccess:()=>{y.invalidateQueries({queryKey:["doctors"]}),L(),g({title:o("common.success"),description:D?"Doctor updated successfully":"Doctor created successfully"})}})]})}export{q as DoctorsPage};
