import{r as e,j as s}from"./ui-77ih3y5-.js";import{u as a}from"./useQuery-Dlp3A4Ud.js";import{x as t,y as i,I as l,z as n,j as r,k as c,l as d,m as o,q as m,a as x,F as h,d as j,D as p,g as u,E as g,P as v,G as y}from"./index-Dujr78kO.js";import{u as N}from"./useMutation-DHGRmv7m.js";import{L as f}from"./label-l12jvvxt.js";import{T as b}from"./textarea-DP8UPA2I.js";import{S as w,a as C,b as D,c as F,d as S}from"./select-DGXQeRqO.js";import{S as A}from"./StandardModal-Bu4nfB9c.js";import{b as T}from"./client-B8Nu1JAV.js";import{A as P,m as M}from"./animations-B6zYn4RS.js";import{C as k}from"./clock-BSH9Dcvi.js";import{A as B}from"./activity-7thVPbvO.js";import{P as E}from"./pill-mOhGjarN.js";import{S as O}from"./stethoscope-DHkBz6au.js";import{T as q}from"./trending-up-B_ehj4Dk.js";import{R as H,L,C as I,X as K,Y as V,T as Y,a as $,P as z,b as G,d as R,B as U,e as _}from"./charts-BdQpHC93.js";import{S as Q}from"./square-pen-DnvHHSTd.js";import{T as X}from"./trash-2-CfuxWZSG.js";import{B as J}from"./brain-DV2drEwe.js";import"./vendor-DZByZrCh.js";import"./chevron-down-CaI_Em0f.js";import"./check-QCXJeeDZ.js";function W({patient:a,onClose:r,onSuccess:c}){const{t:d}=t(),{toast:o}=i(),m=!!a,[x,h]=e.useState({firstName:(null==a?void 0:a.firstName)||"",lastName:(null==a?void 0:a.lastName)||"",email:(null==a?void 0:a.email)||"",phone:(null==a?void 0:a.phone)||"",dateOfBirth:(null==a?void 0:a.dateOfBirth)?new Date(a.dateOfBirth).toISOString().split("T")[0]:"",gender:(null==a?void 0:a.gender)||"male",address:(null==a?void 0:a.address)||"",emergencyContact:(null==a?void 0:a.emergencyContact)||"",emergencyPhone:(null==a?void 0:a.emergencyPhone)||"",medicalHistory:(null==a?void 0:a.medicalHistory)||"",allergies:(null==a?void 0:a.allergies)||"",currentMedications:(null==a?void 0:a.currentMedications)||""}),j=N({mutationFn:async e=>await T.clinic.createPatient(e),onSuccess:()=>{c()},onError:e=>{o({title:d("common.error"),description:"Failed to create patient. A corresponding user must be created first.",variant:"destructive"})}}),p=N({mutationFn:async e=>await T.clinic.updatePatient(e),onSuccess:()=>{c()},onError:e=>{o({title:d("common.error"),description:"Failed to update patient",variant:"destructive"})}}),u=(e,s)=>{h(a=>({...a,[e]:s}))},g=j.isPending||p.isPending;return s.jsx(A,{isOpen:!0,onClose:r,title:m?"Edit Patient":d("patients.add"),children:s.jsxs("form",{onSubmit:async e=>{e.preventDefault();const s={...x,dateOfBirth:new Date(x.dateOfBirth)};m&&a?p.mutate({id:a.id,...s}):o({title:"Action Not Supported",description:"Please use the 'Add User' feature in the Admin dashboard to create new patients.",variant:"destructive"})},className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(f,{htmlFor:"firstName",children:d("patients.firstName")}),s.jsx(l,{id:"firstName",value:x.firstName,onChange:e=>u("firstName",e.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(f,{htmlFor:"lastName",children:d("patients.lastName")}),s.jsx(l,{id:"lastName",value:x.lastName,onChange:e=>u("lastName",e.target.value),required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(f,{htmlFor:"email",children:d("common.email")}),s.jsx(l,{id:"email",type:"email",value:x.email,onChange:e=>u("email",e.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(f,{htmlFor:"phone",children:d("common.phone")}),s.jsx(l,{id:"phone",value:x.phone,onChange:e=>u("phone",e.target.value),required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(f,{htmlFor:"dateOfBirth",children:d("patients.dateOfBirth")}),s.jsx(l,{id:"dateOfBirth",type:"date",value:x.dateOfBirth,onChange:e=>u("dateOfBirth",e.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(f,{htmlFor:"gender",children:d("patients.gender")}),s.jsxs(w,{value:x.gender,onValueChange:e=>u("gender",e),children:[s.jsx(C,{children:s.jsx(D,{})}),s.jsxs(F,{children:[s.jsx(S,{value:"male",children:"Male"}),s.jsx(S,{value:"female",children:"Female"}),s.jsx(S,{value:"other",children:"Other"})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(f,{htmlFor:"address",children:d("patients.address")}),s.jsx(b,{id:"address",value:x.address,onChange:e=>u("address",e.target.value),required:!0})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(f,{htmlFor:"emergencyContact",children:d("patients.emergencyContact")}),s.jsx(l,{id:"emergencyContact",value:x.emergencyContact,onChange:e=>u("emergencyContact",e.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(f,{htmlFor:"emergencyPhone",children:d("patients.emergencyPhone")}),s.jsx(l,{id:"emergencyPhone",value:x.emergencyPhone,onChange:e=>u("emergencyPhone",e.target.value),required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(f,{htmlFor:"medicalHistory",children:d("patients.medicalHistory")}),s.jsx(b,{id:"medicalHistory",value:x.medicalHistory,onChange:e=>u("medicalHistory",e.target.value),placeholder:"Enter medical history..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(f,{htmlFor:"allergies",children:d("patients.allergies")}),s.jsx(b,{id:"allergies",value:x.allergies,onChange:e=>u("allergies",e.target.value),placeholder:"Enter known allergies..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(f,{htmlFor:"currentMedications",children:d("patients.currentMedications")}),s.jsx(b,{id:"currentMedications",value:x.currentMedications,onChange:e=>u("currentMedications",e.target.value),placeholder:"Enter current medications..."})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx(n,{type:"submit",disabled:g,className:"flex-1",children:d(g?"common.loading":"common.save")}),s.jsx(n,{type:"button",variant:"outline",onClick:r,disabled:g,children:d("common.cancel")})]})]})})}const Z={appointment:j,diagnosis:O,medication:E,lab_test:h,procedure:B,allergy:m,vaccination:x,surgery:B,emergency:m,follow_up:k},ee={low:"bg-green-100 text-green-800 border-green-200",medium:"bg-yellow-100 text-yellow-800 border-yellow-200",high:"bg-orange-100 text-orange-800 border-orange-200",critical:"bg-red-100 text-red-800 border-red-200"},se={low:"#10B981",medium:"#F59E0B",high:"#F97316",critical:"#EF4444"};function ae({patientId:a,events:t,onEventClick:i}){const[l,n]=e.useState("all"),[x,h]=e.useState("timeline"),[j,g]=e.useState("1y"),v=e.useMemo(()=>{let e=t;"all"!==l&&(e=e.filter(e=>e.eventType===l));const s=new Date,a={"1m":new Date(s.getFullYear(),s.getMonth()-1,s.getDate()),"3m":new Date(s.getFullYear(),s.getMonth()-3,s.getDate()),"6m":new Date(s.getFullYear(),s.getMonth()-6,s.getDate()),"1y":new Date(s.getFullYear()-1,s.getMonth(),s.getDate()),all:new Date(0)};return e=e.filter(e=>e.eventDate>=a[j]),e.sort((e,s)=>s.eventDate.getTime()-e.eventDate.getTime())},[t,l,j]),y=e.useMemo(()=>{const e=v.reduce((e,s)=>(e[s.eventType]=(e[s.eventType]||0)+1,e),{}),s=v.reduce((e,s)=>(e[s.severity]=(e[s.severity]||0)+1,e),{}),a=v.reduce((e,s)=>{const a=s.eventDate.toLocaleDateString("en-US",{year:"numeric",month:"short"});return e[a]=(e[a]||0)+1,e},{});return{eventTypeCounts:Object.entries(e).map(([e,s])=>({type:e,count:s})),severityCounts:Object.entries(s).map(([e,s])=>({severity:e,count:s})),monthlyData:Object.entries(a).map(([e,s])=>({month:e,count:s})).sort((e,s)=>new Date(e.month).getTime()-new Date(s.month).getTime())}},[v]);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Medical Timeline"}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[v.length," events in the selected time range"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(w,{value:x,onValueChange:e=>h(e),children:[s.jsx(C,{className:"w-32",children:s.jsx(D,{})}),s.jsxs(F,{children:[s.jsx(S,{value:"timeline",children:"Timeline"}),s.jsx(S,{value:"chart",children:"Charts"}),s.jsx(S,{value:"analytics",children:"Analytics"})]})]}),s.jsxs(w,{value:l,onValueChange:n,children:[s.jsx(C,{className:"w-40",children:s.jsx(D,{placeholder:"Filter by type"})}),s.jsxs(F,{children:[s.jsx(S,{value:"all",children:"All Events"}),s.jsx(S,{value:"appointment",children:"Appointments"}),s.jsx(S,{value:"diagnosis",children:"Diagnoses"}),s.jsx(S,{value:"medication",children:"Medications"}),s.jsx(S,{value:"lab_test",children:"Lab Tests"}),s.jsx(S,{value:"procedure",children:"Procedures"}),s.jsx(S,{value:"allergy",children:"Allergies"}),s.jsx(S,{value:"vaccination",children:"Vaccinations"})]})]}),s.jsxs(w,{value:j,onValueChange:e=>g(e),children:[s.jsx(C,{className:"w-24",children:s.jsx(D,{})}),s.jsxs(F,{children:[s.jsx(S,{value:"1m",children:"1M"}),s.jsx(S,{value:"3m",children:"3M"}),s.jsx(S,{value:"6m",children:"6M"}),s.jsx(S,{value:"1y",children:"1Y"}),s.jsx(S,{value:"all",children:"All"})]})]})]})]}),s.jsxs(P,{mode:"wait",children:["timeline"===x&&s.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:s.jsx("div",{className:"space-y-6",children:v.map((e,a)=>{const t=Z[e.eventType];return s.jsx(M.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{delay:.1*a},className:"relative",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${ee[e.severity]}`,children:s.jsx(t,{className:"w-6 h-6"})}),a<v.length-1&&s.jsx("div",{className:"w-0.5 h-16 bg-gray-200 mt-2"})]}),s.jsxs(r,{className:"flex-1 cursor-pointer transition-all duration-200 hover:shadow-lg hover:scale-[1.02] "+("critical"===e.severity?"border-red-200 bg-red-50/50":""),onClick:()=>null==i?void 0:i(e),children:[s.jsx(c,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsxs(d,{className:"text-lg flex items-center gap-2",children:[e.title,s.jsx(p,{variant:"outline",className:ee[e.severity],children:e.severity})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.eventDate.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),s.jsx(p,{variant:"secondary",className:"capitalize",children:e.eventType.replace("_"," ")})]})}),s.jsxs(o,{children:[s.jsx("p",{className:"text-gray-700 mb-3",children:e.description}),e.doctorName&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(u,{className:"w-4 h-4"}),s.jsxs("span",{children:["Dr. ",e.doctorName]})]})]})]})]})},e.id)})})},"timeline"),"chart"===x&&s.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(r,{children:[s.jsx(c,{children:s.jsxs(d,{className:"flex items-center gap-2",children:[s.jsx(q,{className:"w-5 h-5"}),"Events Over Time"]})}),s.jsx(o,{children:s.jsx(H,{width:"100%",height:300,children:s.jsxs(L,{data:y.monthlyData,children:[s.jsx(I,{strokeDasharray:"3 3"}),s.jsx(K,{dataKey:"month"}),s.jsx(V,{}),s.jsx(Y,{}),s.jsx($,{type:"monotone",dataKey:"count",stroke:"#3B82F6",strokeWidth:2})]})})})]}),s.jsxs(r,{children:[s.jsx(c,{children:s.jsxs(d,{className:"flex items-center gap-2",children:[s.jsx(B,{className:"w-5 h-5"}),"Event Types Distribution"]})}),s.jsx(o,{children:s.jsx(H,{width:"100%",height:300,children:s.jsxs(z,{children:[s.jsx(G,{data:y.eventTypeCounts,cx:"50%",cy:"50%",labelLine:!1,label:({type:e,percent:s})=>`${e} ${(100*s).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"count",children:y.eventTypeCounts.map((e,a)=>s.jsx(R,{fill:["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6"][a%5]},`cell-${a}`))}),s.jsx(Y,{})]})})})]})]}),s.jsxs(r,{children:[s.jsx(c,{children:s.jsxs(d,{className:"flex items-center gap-2",children:[s.jsx(m,{className:"w-5 h-5"}),"Severity Analysis"]})}),s.jsx(o,{children:s.jsx(H,{width:"100%",height:300,children:s.jsxs(U,{data:y.severityCounts,children:[s.jsx(I,{strokeDasharray:"3 3"}),s.jsx(K,{dataKey:"severity"}),s.jsx(V,{}),s.jsx(Y,{}),s.jsx(_,{dataKey:"count",fill:"#3B82F6",children:y.severityCounts.map((e,a)=>s.jsx(R,{fill:se[e.severity]},`cell-${a}`))})]})})})]})]})},"chart"),"analytics"===x&&s.jsxs(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs(r,{children:[s.jsx(c,{children:s.jsx(d,{className:"text-lg",children:"Total Events"})}),s.jsx(o,{children:s.jsx("div",{className:"text-3xl font-bold text-blue-600",children:v.length})})]}),s.jsxs(r,{children:[s.jsx(c,{children:s.jsx(d,{className:"text-lg",children:"Critical Events"})}),s.jsx(o,{children:s.jsx("div",{className:"text-3xl font-bold text-red-600",children:v.filter(e=>"critical"===e.severity).length})})]}),s.jsxs(r,{children:[s.jsx(c,{children:s.jsx(d,{className:"text-lg",children:"Active Issues"})}),s.jsx(o,{children:s.jsx("div",{className:"text-3xl font-bold text-orange-600",children:v.filter(e=>e.isActive&&"high"===e.severity).length})})]})]},"analytics")]})]})}function te(){const{t:m}=t(),{toast:x}=i(),h=g(),[j,f]=e.useState(""),[b,w]=e.useState(!1),[C,D]=e.useState(null),[F,S]=e.useState(null),[A,P]=e.useState("list"),{data:E,isLoading:O,error:H}=a({queryKey:["patients",j],queryFn:async()=>await T.clinic.listPatients({search:j||void 0,limit:100})}),L=N({mutationFn:async e=>{await T.clinic.deletePatient({id:e})},onSuccess:()=>{h.invalidateQueries({queryKey:["patients"]}),x({title:m("common.success"),description:"Patient deleted successfully"})},onError:e=>{x({title:m("common.error"),description:"Failed to delete patient",variant:"destructive"})}}),I=()=>{w(!1),D(null)},K=[{id:"1",eventType:"appointment",title:"Annual Checkup",description:"Routine annual health examination",eventDate:new Date(2024,0,15),doctorName:"Dr. Sarah Johnson",severity:"low",isActive:!0,createdAt:new Date(2024,0,15)},{id:"2",eventType:"diagnosis",title:"Seasonal Allergies",description:"Diagnosed with seasonal allergic rhinitis",eventDate:new Date(2024,1,20),doctorName:"Dr. Michael Chen",severity:"low",isActive:!0,createdAt:new Date(2024,1,20)},{id:"3",eventType:"medication",title:"Prescribed Antihistamines",description:"Cetirizine 10mg daily for allergy management",eventDate:new Date(2024,1,20),doctorName:"Dr. Michael Chen",severity:"low",isActive:!0,createdAt:new Date(2024,1,20)}];return H?s.jsx("div",{className:"text-center py-12",children:s.jsxs("p",{className:"text-red-600",children:[m("common.error"),": ",H.message]})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:m("patients.title")}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Advanced patient management with AI-powered insights"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(n,{variant:"outline",onClick:()=>P("list"),className:"flex items-center gap-2",children:[s.jsx(u,{className:"w-4 h-4"}),"Patient List"]}),s.jsxs(n,{variant:"outline",onClick:()=>P("timeline"),className:"flex items-center gap-2",children:[s.jsx(k,{className:"w-4 h-4"}),"Timeline View"]}),s.jsxs(n,{variant:"outline",onClick:()=>P("analytics"),className:"flex items-center gap-2",children:[s.jsx(q,{className:"w-4 h-4"}),"Analytics"]}),s.jsxs(n,{onClick:()=>w(!0),className:"flex items-center gap-2",children:[s.jsx(v,{className:"w-4 h-4"}),m("patients.add")]})]})]}),"list"===A&&s.jsx(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"flex items-center gap-4",children:s.jsxs("div",{className:"relative flex-1 max-w-md",children:[s.jsx(y,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx(l,{placeholder:m("common.search"),value:j,onChange:e=>f(e.target.value),className:"pl-10"})]})}),"list"===A&&s.jsxs(s.Fragment,{children:[O?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,a)=>s.jsxs(r,{className:"animate-pulse",children:[s.jsxs(c,{children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]}),s.jsx(o,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"h-3 bg-gray-200 rounded"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})})]},a))}):s.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:null==E?void 0:E.patients.map((e,a)=>s.jsx(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*a},whileHover:{y:-2},children:s.jsxs(r,{className:"h-full transition-all duration-200 hover:shadow-md cursor-pointer",onClick:()=>(e=>{S(e),P("timeline")})(e),children:[s.jsx(c,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(u,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsxs(d,{className:"text-lg",children:[e.firstName," ",e.lastName]}),s.jsx("p",{className:"text-sm text-gray-600",children:e.email})]})]}),s.jsx(p,{variant:"secondary",className:"text-xs",children:e.gender})]})}),s.jsxs(o,{className:"space-y-3",children:[s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{className:"text-gray-600",children:[m("common.phone"),":"]}),s.jsx("span",{children:e.phone})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"DOB:"}),s.jsx("span",{children:new Date(e.dateOfBirth).toLocaleDateString()})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Emergency:"}),s.jsx("span",{className:"text-right",children:e.emergencyContact})]})]}),s.jsxs("div",{className:"flex gap-2 pt-2",children:[s.jsxs(n,{variant:"outline",size:"sm",onClick:s=>{s.stopPropagation(),(e=>{D(e),w(!0)})(e)},className:"flex-1",children:[s.jsx(Q,{className:"w-3 h-3 mr-1"}),m("common.edit")]}),s.jsxs(n,{variant:"outline",size:"sm",onClick:s=>{s.stopPropagation(),(async e=>{window.confirm("Are you sure you want to delete this patient?")&&L.mutate(e)})(e.id)},className:"flex-1",children:[s.jsx(X,{className:"w-3 h-3 mr-1"}),m("common.delete")]})]})]})]})},e.id))}),0===(null==E?void 0:E.patients.length)&&!O&&s.jsxs(M.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[s.jsx(u,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No patients found"}),s.jsx("p",{className:"text-gray-600 mb-4",children:j?"Try adjusting your search terms":"Get started by adding your first patient"}),s.jsxs(n,{onClick:()=>w(!0),children:[s.jsx(v,{className:"w-4 h-4 mr-2"}),m("patients.add")]})]})]}),"timeline"===A&&F&&s.jsxs(M.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[s.jsxs("div",{className:"mb-4",children:[s.jsx(n,{variant:"outline",onClick:()=>P("list"),className:"mb-4",children:"â† Back to Patient List"}),s.jsxs("h2",{className:"text-xl font-semibold",children:["Medical Timeline: ",F.firstName," ",F.lastName]})]}),s.jsx(ae,{patientId:F.id,events:K,onEventClick:e=>{x({title:"Medical Event",description:`Viewing details for: ${e.title}`})}})]}),"analytics"===A&&s.jsxs(M.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsxs(r,{children:[s.jsx(c,{className:"pb-3",children:s.jsxs(d,{className:"text-lg flex items-center gap-2",children:[s.jsx(u,{className:"w-5 h-5 text-blue-600"}),"Total Patients"]})}),s.jsx(o,{children:s.jsx("div",{className:"text-3xl font-bold text-blue-600",children:(null==E?void 0:E.patients.length)||0})})]}),s.jsxs(r,{children:[s.jsx(c,{className:"pb-3",children:s.jsxs(d,{className:"text-lg flex items-center gap-2",children:[s.jsx(B,{className:"w-5 h-5 text-green-600"}),"Active Patients"]})}),s.jsx(o,{children:s.jsx("div",{className:"text-3xl font-bold text-green-600",children:Math.floor(.85*((null==E?void 0:E.patients.length)||0))})})]}),s.jsxs(r,{children:[s.jsx(c,{className:"pb-3",children:s.jsxs(d,{className:"text-lg flex items-center gap-2",children:[s.jsx(J,{className:"w-5 h-5 text-purple-600"}),"AI Insights"]})}),s.jsx(o,{children:s.jsx("div",{className:"text-3xl font-bold text-purple-600",children:"24"})})]}),s.jsxs(r,{children:[s.jsx(c,{className:"pb-3",children:s.jsxs(d,{className:"text-lg flex items-center gap-2",children:[s.jsx(q,{className:"w-5 h-5 text-orange-600"}),"Growth Rate"]})}),s.jsx(o,{children:s.jsx("div",{className:"text-3xl font-bold text-orange-600",children:"+12%"})})]})]}),s.jsxs(r,{children:[s.jsx(c,{children:s.jsx(d,{children:"Patient Demographics"})}),s.jsx(o,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-2",children:"Gender Distribution"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Male:"}),s.jsx("span",{className:"font-semibold",children:"45%"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Female:"}),s.jsx("span",{className:"font-semibold",children:"52%"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Other:"}),s.jsx("span",{className:"font-semibold",children:"3%"})]})]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600 mb-2",children:"Age Groups"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"18-30:"}),s.jsx("span",{className:"font-semibold",children:"25%"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"31-50:"}),s.jsx("span",{className:"font-semibold",children:"40%"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"51+:"}),s.jsx("span",{className:"font-semibold",children:"35%"})]})]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600 mb-2",children:"Health Status"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Healthy:"}),s.jsx("span",{className:"font-semibold",children:"70%"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Chronic:"}),s.jsx("span",{className:"font-semibold",children:"20%"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Critical:"}),s.jsx("span",{className:"font-semibold",children:"10%"})]})]})]})]})})]})]}),b&&s.jsx(W,{patient:C,onClose:I,onSuccess:()=>{h.invalidateQueries({queryKey:["patients"]}),I(),x({title:m("common.success"),description:C?"Patient updated successfully":"Patient created successfully"})}})]})}export{te as PatientsPage};
