import{r as e,j as t}from"./ui-77ih3y5-.js";import{u as a}from"./useQuery-Dlp3A4Ud.js";import{c as s,j as i,k as r,l as n,m as l,x as o,U as c,J as d,d as x,z as y}from"./index-Dujr78kO.js";import{b as p,m}from"./animations-B6zYn4RS.js";import{T as h}from"./trending-up-B_ehj4Dk.js";import{b as u}from"./client-B8Nu1JAV.js";import{L as j,X as f,Y as g,C as v,T as b,f as k,a as N,B as w,e as L,A as K,g as C,R as $}from"./charts-BdQpHC93.js";import{D as S}from"./dollar-sign-B5-PpJzV.js";import"./vendor-DZByZrCh.js";
/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=s("trending-down",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);function z({title:a,value:s,previousValue:o,prefix:c="",suffix:d="",icon:x,color:y="text-blue-600",bgColor:u="bg-blue-100",sparklineData:j=[],delay:f=0}){const[g,v]=e.useState(0),b=p(0,{stiffness:100,damping:30}),k=o?(s-o)/o*100:0,N=k>=0;e.useEffect(()=>{const e=setTimeout(()=>{b.set(s)},f);return()=>clearTimeout(e)},[s,b,f]),e.useEffect(()=>b.on("change",e=>{v(e)}),[b]);const w=e=>{if(e.length<2)return"";const t=Math.max(...e),a=Math.min(...e),s=t-a||1;return`M ${e.map((t,i)=>`${i/(e.length-1)*100},${30-(t-a)/s*30}`).join(" L ")}`};return t.jsx(m.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.5,delay:f,type:"spring",stiffness:100,damping:20},whileHover:{y:-5,transition:{duration:.2}},children:t.jsxs(i,{className:"relative overflow-hidden transition-all duration-300 hover:shadow-lg border-0 bg-gradient-to-br from-white to-gray-50/50",children:[t.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 opacity-5",children:t.jsx("div",{className:`w-full h-full ${u} rounded-full transform translate-x-8 -translate-y-8`})}),t.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(n,{className:"text-sm font-medium text-gray-600",children:a}),t.jsx(m.div,{className:`w-8 h-8 ${u} rounded-lg flex items-center justify-center`,whileHover:{scale:1.1,rotate:5},transition:{type:"spring",stiffness:400,damping:10},children:t.jsx(x,{className:`w-4 h-4 ${y}`})})]}),t.jsxs(l,{className:"space-y-3",children:[t.jsxs(m.div,{className:"text-2xl font-bold text-gray-900",initial:{scale:.8},animate:{scale:1},transition:{delay:f+.2,type:"spring",stiffness:200},children:[c,(L=g,L>=1e6?(L/1e6).toFixed(1)+"M":L>=1e3?(L/1e3).toFixed(1)+"K":Math.round(L).toString()),d]}),void 0!==o&&t.jsxs(m.div,{className:"flex items-center gap-1",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:f+.4},children:[N?t.jsx(h,{className:"w-4 h-4 text-green-500"}):t.jsx(D,{className:"w-4 h-4 text-red-500"}),t.jsxs("span",{className:"text-sm font-medium "+(N?"text-green-600":"text-red-600"),children:[Math.abs(k).toFixed(1),"%"]}),t.jsx("span",{className:"text-sm text-gray-500",children:"vs last period"})]}),j.length>1&&t.jsx(m.div,{className:"h-8 w-full",initial:{opacity:0,scaleX:0},animate:{opacity:1,scaleX:1},transition:{delay:f+.6,duration:.8},children:t.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 100 30",className:"overflow-visible",children:[t.jsx("defs",{children:t.jsxs("linearGradient",{id:`gradient-${a}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[t.jsx("stop",{offset:"0%",stopColor:y.replace("text-","").replace("-600",""),stopOpacity:"0.3"}),t.jsx("stop",{offset:"100%",stopColor:y.replace("text-","").replace("-600",""),stopOpacity:"0"})]})}),t.jsx(m.path,{d:`${w(j)} L 100,30 L 0,30 Z`,fill:`url(#gradient-${a})`,initial:{pathLength:0},animate:{pathLength:1},transition:{delay:f+.8,duration:1}}),t.jsx(m.path,{d:w(j),stroke:y.includes("blue")?"#3b82f6":y.includes("green")?"#10b981":"#6366f1",strokeWidth:"2",fill:"none",initial:{pathLength:0},animate:{pathLength:1},transition:{delay:f+.8,duration:1}}),j.map((e,a)=>{const s=Math.max(...j),i=Math.min(...j),r=s-i||1,n=a/(j.length-1)*100,l=30-(e-i)/r*30;return t.jsx(m.circle,{cx:n,cy:l,r:"2",fill:y.includes("blue")?"#3b82f6":y.includes("green")?"#10b981":"#6366f1",initial:{scale:0},animate:{scale:1},transition:{delay:f+1+.1*a}},a)})]})})]}),t.jsx(m.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent opacity-0",whileHover:{opacity:1,x:["-100%","100%"],transition:{duration:.6}}})]})});var L}const A=({active:e,payload:a,label:s})=>e&&a&&a.length?t.jsxs("div",{className:"p-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg",children:[t.jsx("p",{className:"label font-bold text-gray-900 dark:text-white",children:`${s}`}),a.map((e,a)=>t.jsx("p",{style:{color:e.color},children:`${e.name}: ${e.value}`},a))]}):null;function F({data:e,type:a,dataKey:s,xAxisKey:i,yAxisKey:r,colors:n={stroke:"#8884d8",fill:"#8884d8"}}){const l={area:t.jsxs(K,{data:e,children:[t.jsx("defs",{children:t.jsxs("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"5%",stopColor:n.fill,stopOpacity:.8}),t.jsx("stop",{offset:"95%",stopColor:n.fill,stopOpacity:0})]})}),t.jsx(f,{dataKey:i,stroke:"currentColor",fontSize:12,tickLine:!1,axisLine:!1}),t.jsx(g,{stroke:"currentColor",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:e=>`${e}`}),t.jsx(v,{strokeDasharray:"3 3",className:"stroke-gray-200 dark:stroke-gray-700"}),t.jsx(b,{content:t.jsx(A,{})}),t.jsx(C,{type:"monotone",dataKey:s,stroke:n.stroke,fillOpacity:1,fill:"url(#colorUv)"})]}),bar:t.jsxs(w,{data:e,children:[t.jsx(f,{dataKey:i,stroke:"currentColor",fontSize:12,tickLine:!1,axisLine:!1}),t.jsx(g,{stroke:"currentColor",fontSize:12,tickLine:!1,axisLine:!1}),t.jsx(v,{strokeDasharray:"3 3",className:"stroke-gray-200 dark:stroke-gray-700"}),t.jsx(b,{content:t.jsx(A,{})}),t.jsx(k,{}),t.jsx(L,{dataKey:s,fill:n.fill,radius:[4,4,0,0]})]}),line:t.jsxs(j,{data:e,children:[t.jsx(f,{dataKey:i,stroke:"currentColor",fontSize:12,tickLine:!1,axisLine:!1}),t.jsx(g,{stroke:"currentColor",fontSize:12,tickLine:!1,axisLine:!1}),t.jsx(v,{strokeDasharray:"3 3",className:"stroke-gray-200 dark:stroke-gray-700"}),t.jsx(b,{content:t.jsx(A,{})}),t.jsx(k,{}),t.jsx(N,{type:"monotone",dataKey:s,stroke:n.stroke,strokeWidth:2,dot:{r:4},activeDot:{r:8}})]})};return t.jsx(m.div,{className:"w-full h-80",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:t.jsx($,{children:l[a]})})}function q(){const{t:s}=o(),[p,h]=e.useState("month"),[j,f]=e.useState("month"),{data:g,isLoading:v}=a({queryKey:["dashboard-stats"],queryFn:()=>u.analytics.getDashboardStats()}),{data:b,isLoading:k}=a({queryKey:["revenue-trends",p],queryFn:()=>u.analytics.getRevenueTrends({period:p})}),{data:N,isLoading:w}=a({queryKey:["appointment-trends",j],queryFn:()=>u.analytics.getAppointmentTrends({period:j})}),{data:L,isLoading:K}=a({queryKey:["doctor-performance"],queryFn:()=>u.analytics.getDoctorPerformance()}),C=[{title:s("analytics.totalPatients"),value:(null==g?void 0:g.totalPatients)||0,icon:c,color:"text-blue-600",bgColor:"bg-blue-100"},{title:s("analytics.totalDoctors"),value:(null==g?void 0:g.totalDoctors)||0,icon:d,color:"text-green-600",bgColor:"bg-green-100"},{title:s("analytics.totalAppointments"),value:(null==g?void 0:g.totalAppointments)||0,icon:x,color:"text-purple-600",bgColor:"bg-purple-100"},{title:s("analytics.totalRevenue"),value:(null==g?void 0:g.totalRevenue)||0,prefix:"₹",icon:S,color:"text-emerald-600",bgColor:"bg-emerald-100"}],$=(e,a)=>t.jsx("div",{className:"flex gap-2",children:["day","week","month","year"].map(s=>t.jsx(y,{size:"sm",variant:e===s?"default":"outline",onClick:()=>a(s),className:"capitalize",children:s},s))});return t.jsxs("div",{className:"space-y-8",children:[t.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-2",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:s("analytics.title")}),t.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Overview of your healthcare practice performance"})]}),t.jsx(m.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:C.map((e,a)=>t.jsx(z,{...e,delay:.1*a},e.title))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs(i,{children:[t.jsxs(r,{className:"flex flex-row items-center justify-between",children:[t.jsx(n,{children:s("analytics.revenueTrends")}),$(p,h)]}),t.jsx(l,{children:t.jsx(F,{data:(null==b?void 0:b.trends)||[],type:"line",dataKey:"revenue",xAxisKey:"date",colors:{stroke:"#10b981",fill:"#10b981"}})})]}),t.jsxs(i,{children:[t.jsxs(r,{className:"flex flex-row items-center justify-between",children:[t.jsx(n,{children:s("analytics.appointmentTrends")}),$(j,f)]}),t.jsx(l,{children:t.jsx(F,{data:(null==N?void 0:N.trends)||[],type:"line",dataKey:"count",xAxisKey:"date",colors:{stroke:"#8b5cf6",fill:"#8b5cf6"}})})]})]}),t.jsxs(i,{children:[t.jsx(r,{children:t.jsx(n,{children:s("analytics.doctorPerformance")})}),t.jsx(l,{children:t.jsx("div",{className:"space-y-3",children:null==L?void 0:L.doctors.slice(0,5).map((e,a)=>t.jsxs(m.div,{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.8+.1*a},children:[t.jsx("span",{className:"font-medium",children:e.doctorName}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.totalAppointments," appts"]}),t.jsxs("span",{className:"text-sm text-green-600",children:["₹",e.totalRevenue.toFixed(2)]})]})]},e.doctorId))})})]})]})}export{q as AnalyticsPage};
