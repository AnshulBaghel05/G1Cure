import{r as e,j as t,R as s}from"./ui-77ih3y5-.js";import{A as a}from"./AnimatedButton-Bcc-K-Ct.js";import{A as l}from"./AnimatedModal-DoxFigkX.js";import{f as r,E as o,T as i,P as d,G as n,v as c,d as x,M as m,V as p,H as u}from"./index-Dujr78kO.js";import{u as h}from"./useQuery-Dlp3A4Ud.js";import{u as b}from"./useMutation-DHGRmv7m.js";import{b as f}from"./client-B8Nu1JAV.js";import{C as g}from"./clock-BSH9Dcvi.js";import{M as j}from"./map-pin-Duk6Xe_d.js";import{S as v}from"./stethoscope-DHkBz6au.js";import{E as w}from"./eye-BknmmNLs.js";import"./vendor-DZByZrCh.js";import"./animations-B6zYn4RS.js";import"./charts-BdQpHC93.js";function N(){const{user:N}=r(),k=o(),[y,C]=e.useState(""),[D,S]=e.useState("all"),[A,P]=e.useState(null),[L,M]=e.useState(!1),[T,z]=e.useState(!1),[E,F]=e.useState({patient:"",doctor:"",appointmentDate:"",duration:"30",type:"consultation",symptoms:"",notes:""}),{data:$,isLoading:I,error:_}=h({queryKey:["appointments",null==N?void 0:N.profile_id],queryFn:async()=>await f.clinic.listAppointments({patientId:N.profile_id,limit:50}),enabled:!!(null==N?void 0:N.profile_id)}),q=b({mutationFn:async e=>await f.clinic.createAppointment(e),onSuccess:()=>{k.invalidateQueries({queryKey:["appointments",null==N?void 0:N.profile_id]}),z(!1),F({patient:"",doctor:"",appointmentDate:"",duration:"30",type:"consultation",symptoms:"",notes:""})}}),O=(null==$?void 0:$.appointments)||[],V=e=>{switch(e){case"consultation":return v;case"follow-up":return u;case"telemedicine":return p;default:return x}},B=e=>{switch(e){case"scheduled":return"from-blue-500 to-indigo-500";case"confirmed":return"from-emerald-500 to-teal-500";case"completed":return"from-purple-500 to-pink-500";default:return"from-orange-500 to-red-500"}},G=e=>{switch(e){case"scheduled":return"Scheduled";case"confirmed":return"Confirmed";case"completed":return"Completed";default:return"Pending"}},K=O.filter(e=>{var t;const s=e.doctor?`Dr. ${e.doctor.firstName} ${e.doctor.lastName}`:"Unknown Doctor",a=(null==(t=e.doctor)?void 0:t.specialty)||"General",l=s.toLowerCase().includes(y.toLowerCase())||a.toLowerCase().includes(y.toLowerCase()),r="all"===D||e.type===D;return l&&r});return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 relative overflow-hidden",children:[t.jsxs("div",{className:"relative z-10 space-y-8 p-8",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-5xl md:text-6xl font-bold bg-gradient-to-r from-slate-900 via-blue-900 to-purple-900 dark:from-white dark:via-blue-200 dark:to-purple-200 bg-clip-text text-transparent",children:"Appointments"}),t.jsx("p",{className:"text-xl text-slate-600 dark:text-slate-300 mt-3",children:"Schedule and manage your medical appointments with ease"})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx(i,{}),t.jsxs(a,{className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white shadow-lg hover:shadow-xl px-8 py-3 rounded-xl font-medium",onClick:()=>z(!0),children:[t.jsx(d,{className:"w-5 h-5 mr-2"}),"Book Appointment"]})]})]}),t.jsx("div",{className:"bg-white/80 dark:bg-slate-800/80 rounded-2xl p-6 border border-white/20 dark:border-slate-700/20 backdrop-blur-sm shadow-xl",children:t.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[t.jsx("div",{className:"flex-1 max-w-md",children:t.jsxs("div",{className:"relative",children:[t.jsx(n,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),t.jsx("input",{type:"text",placeholder:"Search doctors or specialties...",value:y,onChange:e=>C(e.target.value),className:"pl-10 w-full px-4 py-3 border-2 border-slate-200 dark:border-slate-600 rounded-xl bg-white/80 dark:bg-slate-700/80 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300"})]})}),t.jsxs("select",{value:D,onChange:e=>S(e.target.value),className:"px-4 py-3 border-2 border-slate-200 dark:border-slate-600 rounded-xl bg-white/80 dark:bg-slate-700/80 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300",children:[t.jsx("option",{value:"all",children:"All Types"}),t.jsx("option",{value:"consultation",children:"Consultation"}),t.jsx("option",{value:"follow-up",children:"Follow-up"}),t.jsx("option",{value:"telemedicine",children:"Telemedicine"})]})]})}),t.jsx("div",{className:"space-y-6",children:I?t.jsx("div",{className:"space-y-4",children:[1,2,3].map(e=>t.jsx("div",{className:"bg-white/80 dark:bg-slate-800/80 rounded-2xl p-6 border border-white/20 dark:border-slate-700/20 backdrop-blur-sm shadow-xl animate-pulse",children:t.jsxs("div",{className:"flex items-start space-x-4",children:[t.jsx("div",{className:"w-14 h-14 bg-slate-200 dark:bg-slate-700 rounded-2xl"}),t.jsxs("div",{className:"flex-1 space-y-3",children:[t.jsx("div",{className:"h-6 bg-slate-200 dark:bg-slate-700 rounded w-1/3"}),t.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-2/3"}),t.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-1/2"})]})]})},e))}):_?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl flex items-center justify-center shadow-2xl",children:t.jsx(c,{className:"w-10 h-10 text-white"})}),t.jsx("p",{className:"text-red-600 dark:text-red-400 text-lg font-medium",children:"Error loading appointments"}),t.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2",children:"Please try refreshing the page"})]}):0===K.length?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gradient-to-br from-blue-500 to-purple-500 rounded-2xl flex items-center justify-center shadow-2xl",children:t.jsx(x,{className:"w-10 h-10 text-white"})}),t.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg font-medium",children:"No appointments found"}),t.jsx("p",{className:"text-slate-500 dark:text-slate-500 mt-2",children:y?"Try adjusting your search criteria":"Book your first appointment to get started"})]}):K.map(e=>{var l;const r=e.doctor?`Dr. ${e.doctor.firstName} ${e.doctor.lastName}`:"Unknown Doctor",o=(null==(l=e.doctor)?void 0:l.specialty)||"General",i=new Date(e.appointmentDate);return t.jsx("div",{className:"bg-white/80 dark:bg-slate-800/80 rounded-2xl p-6 border border-white/20 dark:border-slate-700/20 backdrop-blur-sm shadow-xl hover:shadow-2xl transition-all duration-500",children:t.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[t.jsxs("div",{className:"flex items-start space-x-4",children:[t.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center shadow-lg",children:s.createElement(V(e.type),{className:"w-7 h-7 text-white"})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[t.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:r}),t.jsx("div",{className:`px-3 py-1 bg-gradient-to-r ${B(e.status)} text-white rounded-full text-sm font-medium shadow-lg`,children:G(e.status)})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-slate-600 dark:text-slate-400 mb-3",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(x,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),t.jsx("span",{className:"font-medium",children:i.toLocaleDateString()})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(g,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"}),t.jsxs("span",{className:"font-medium",children:[i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," (",e.duration," min)"]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(j,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),t.jsx("span",{className:"font-medium",children:"telemedicine"===e.type?"Virtual Consultation":"In-Person"})]})]}),t.jsxs("div",{className:"flex items-center space-x-2 text-sm text-slate-500 dark:text-slate-400",children:[t.jsx(v,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"}),t.jsx("span",{children:o})]}),e.notes&&t.jsx("div",{className:"mt-3 p-3 bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800/50 dark:to-slate-700/50 rounded-xl border border-slate-200 dark:border-slate-600",children:t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:e.notes})})]})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs(a,{onClick:()=>{P(e),M(!0)},className:"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white shadow-lg hover:shadow-xl",children:[t.jsx(w,{className:"w-4 h-4 mr-2"}),"View Details"]}),t.jsxs(a,{className:"bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 text-white shadow-lg hover:shadow-xl",children:[t.jsx(m,{className:"w-4 h-4 mr-2"}),"Message"]})]})]})},e.id)})})]}),t.jsx(l,{isOpen:L,onClose:()=>M(!1),title:"Appointment Details",size:"lg",children:A&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center",children:s.createElement(V(A.type),{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:A.doctor}),t.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:A.specialty})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(x,{className:"w-5 h-5 text-blue-500"}),t.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:new Date(A.date).toLocaleDateString()})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(g,{className:"w-5 h-5 text-emerald-500"}),t.jsxs("span",{className:"text-slate-700 dark:text-slate-300",children:[A.time," (",A.duration," min)"]})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(j,{className:"w-5 h-5 text-purple-500"}),t.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:A.location})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"p-4 bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800/50 dark:to-slate-700/50 rounded-xl border border-slate-200 dark:border-slate-600",children:[t.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white mb-2",children:"Status"}),t.jsx("div",{className:`inline-flex px-3 py-1 bg-gradient-to-r ${B(A.status)} text-white rounded-full text-sm font-medium`,children:G(A.status)})]}),A.notes&&t.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl border border-blue-200 dark:border-blue-700",children:[t.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white mb-2",children:"Notes"}),t.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:A.notes})]})]})]}),t.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-slate-200 dark:border-slate-600",children:[t.jsx(a,{onClick:()=>M(!1),className:"bg-gradient-to-r from-slate-500 to-slate-600 hover:from-slate-600 hover:to-slate-700 text-white shadow-lg hover:shadow-xl",children:"Close"}),t.jsxs(a,{className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white shadow-lg hover:shadow-xl",children:[t.jsx(m,{className:"w-4 h-4 mr-2"}),"Message Doctor"]})]})]})}),t.jsx(l,{isOpen:T,onClose:()=>z(!1),title:"Schedule New Appointment",size:"xl",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Patient"}),t.jsxs("select",{value:E.patient,onChange:e=>F({...E,patient:e.target.value}),className:"w-full px-4 py-3 border-2 border-slate-200 dark:border-slate-600 rounded-xl bg-white/80 dark:bg-slate-700/80 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300",children:[t.jsx("option",{value:"",children:"Select patient"}),t.jsx("option",{value:"self",children:"Self"}),t.jsx("option",{value:"family",children:"Family Member"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Doctor"}),t.jsxs("select",{value:E.doctor,onChange:e=>F({...E,doctor:e.target.value}),className:"w-full px-4 py-3 border-2 border-slate-200 dark:border-slate-600 rounded-xl bg-white/80 dark:bg-slate-700/80 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300",children:[t.jsx("option",{value:"",children:"Select doctor"}),t.jsx("option",{value:"dr-sarah-johnson",children:"Dr. Sarah Johnson - Cardiology"}),t.jsx("option",{value:"dr-michael-chen",children:"Dr. Michael Chen - Dermatology"}),t.jsx("option",{value:"dr-emily-rodriguez",children:"Dr. Emily Rodriguez - Endocrinology"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Appointment Date"}),t.jsx("input",{type:"date",value:E.appointmentDate,onChange:e=>F({...E,appointmentDate:e.target.value}),className:"w-full px-4 py-3 border-2 border-slate-200 dark:border-slate-600 rounded-xl bg-white/80 dark:bg-slate-700/80 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Duration"}),t.jsxs("select",{value:E.duration,onChange:e=>F({...E,duration:e.target.value}),className:"w-full px-4 py-3 border-2 border-slate-200 dark:border-slate-600 rounded-xl bg-white/80 dark:bg-slate-700/80 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300",children:[t.jsx("option",{value:"15",children:"15 minutes"}),t.jsx("option",{value:"30",children:"30 minutes"}),t.jsx("option",{value:"45",children:"45 minutes"}),t.jsx("option",{value:"60",children:"60 minutes"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Appointment Type"}),t.jsxs("select",{value:E.type,onChange:e=>F({...E,type:e.target.value}),className:"w-full px-4 py-3 border-2 border-slate-200 dark:border-slate-600 rounded-xl bg-white/80 dark:bg-slate-700/80 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300",children:[t.jsx("option",{value:"consultation",children:"Consultation"}),t.jsx("option",{value:"follow-up",children:"Follow-up"}),t.jsx("option",{value:"telemedicine",children:"Telemedicine"})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Symptoms (Optional)"}),t.jsx("textarea",{value:E.symptoms,onChange:e=>F({...E,symptoms:e.target.value}),placeholder:"Describe your symptoms...",rows:3,className:"w-full px-4 py-3 border-2 border-slate-200 dark:border-slate-600 rounded-xl bg-white/80 dark:bg-slate-700/80 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 resize-none"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Additional Notes (Optional)"}),t.jsx("textarea",{value:E.notes,onChange:e=>F({...E,notes:e.target.value}),placeholder:"Any additional information...",rows:3,className:"w-full px-4 py-3 border-2 border-slate-200 dark:border-slate-600 rounded-xl bg-white/80 dark:bg-slate-700/80 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 resize-none"})]}),t.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-slate-200 dark:border-slate-600",children:[t.jsx(a,{onClick:()=>z(!1),className:"bg-gradient-to-r from-slate-500 to-slate-600 hover:from-slate-600 hover:to-slate-700 text-white shadow-lg hover:shadow-xl",children:"Cancel"}),t.jsxs(a,{onClick:async()=>{if(E.doctor&&E.appointmentDate)try{await q.mutateAsync({patientId:N.profile_id,doctorId:E.doctor,appointmentDate:E.appointmentDate,duration:parseInt(E.duration),type:E.type,notes:E.notes,symptoms:E.symptoms})}catch(e){alert("Failed to create appointment. Please try again.")}else alert("Please fill in all required fields")},disabled:q.isPending,className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx(x,{className:"w-4 h-4 mr-2"}),q.isPending?"Scheduling...":"Schedule Appointment"]})]})]})})]})}export{N as AppointmentsPage};
