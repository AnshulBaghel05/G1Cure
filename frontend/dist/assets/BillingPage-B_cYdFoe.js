import{r as e,j as t,R as a}from"./ui-77ih3y5-.js";import{A as s}from"./AnimatedButton-Bcc-K-Ct.js";import{A as r}from"./AnimatedModal-DoxFigkX.js";import{f as l,T as i,P as d,v as o,a as n,d as c,g as m,e as x,F as h}from"./index-Dujr78kO.js";import{u}from"./backend-CGvABKuP.js";import{m as p}from"./animations-B6zYn4RS.js";import{C as b}from"./clock-BSH9Dcvi.js";import{R as f}from"./receipt-Cjp-fwEI.js";import{D as g}from"./dollar-sign-B5-PpJzV.js";import{E as j}from"./eye-BknmmNLs.js";import{S as v}from"./shield-DYQcWHH-.js";import{T as w}from"./trending-up-B_ehj4Dk.js";import"./vendor-DZByZrCh.js";import"./charts-BdQpHC93.js";import"./client-B8Nu1JAV.js";function y(){const{user:y}=l(),N=u(),[k,C]=e.useState(""),[D,S]=e.useState("all"),[P,B]=e.useState(null),[A,M]=e.useState(!1),[L,E]=e.useState(!1),[I,T]=e.useState(""),[F,z]=e.useState(""),[R,U]=e.useState([]),[$,G]=e.useState(!0),[O,V]=e.useState(null);e.useEffect(()=>{(async()=>{if(y)try{G(!0),V(null);const e=(await N.clinic.listBills({patientId:y.profile_id||y.id,limit:100})).bills.map(e=>({id:e.id,date:e.createdAt,dueDate:e.dueDate,amount:e.amount,status:e.status,type:"consultation",description:`Bill for appointment ${e.appointmentId}`,insurance:"Blue Cross Blue Shield",provider:"G1Cure Medical Center",paymentMethod:e.paymentMethod||"Credit Card",paidAt:e.paidAt,notes:"Standard consultation fee"}));U(e)}catch(e){V("Failed to load billing information. Please try again.");U([{id:"1",date:"2024-01-15",dueDate:"2024-02-15",amount:150,status:"paid",type:"consultation",description:"General consultation with Dr. Smith",insurance:"Blue Cross Blue Shield",provider:"G1Cure Medical Center",paymentMethod:"Credit Card",paidAt:"2024-01-20",notes:"Standard consultation fee"},{id:"2",date:"2024-01-20",dueDate:"2024-02-20",amount:75,status:"pending",type:"lab-work",description:"Blood test and lab work",insurance:"Blue Cross Blue Shield",provider:"LabCorp",paymentMethod:"Credit Card",paidAt:null,notes:"Lab work for routine checkup"}])}finally{G(!1)}})()},[y,N]);const _=async e=>(await new Promise(e=>setTimeout(e,2e3)),{success:!0,transactionId:"TXN-"+Date.now()}),H=!1,W=R.filter(e=>"pending"===e.status||"overdue"===e.status).reduce((e,t)=>e+t.patientResponsibility,0),X=R.filter(e=>"paid"===e.status).reduce((e,t)=>e+t.patientResponsibility,0),Y=R.filter(e=>{const t=e.description.toLowerCase().includes(k.toLowerCase())||e.provider.toLowerCase().includes(k.toLowerCase())||e.invoiceNumber.toLowerCase().includes(k.toLowerCase()),a="all"===D||e.status===D;return t&&a}),q=e=>{switch(e){case"consultation":return m;case"procedure":default:return h;case"medication":return f;case"lab-work":return w;case"imaging":return j}},J=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),K=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),Q=()=>{E(!0)};return $?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading billing information..."})]})}):O?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),t.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Error Loading Billing"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:O}),t.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Try Again"})]})}):t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 relative overflow-hidden",children:[t.jsxs("div",{className:"relative z-10 space-y-8 p-8",children:[t.jsx(p.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx(p.h1,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},className:"text-5xl md:text-6xl font-bold bg-gradient-to-r from-slate-900 via-blue-900 to-purple-900 dark:from-white dark:via-blue-200 dark:to-purple-200 bg-clip-text text-transparent",children:"Billing & Payments"}),t.jsx(p.p,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},className:"text-xl text-slate-600 dark:text-slate-300 mt-3",children:"Manage your medical bills and payment methods"})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx(i,{}),t.jsxs(s,{onClick:Q,className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white shadow-lg hover:shadow-xl px-8 py-3 rounded-xl font-medium",children:[t.jsx(d,{className:"w-5 h-5 mr-2"}),"Make Payment"]})]})]})}),t.jsx(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[{title:"Outstanding Balance",value:J(W),icon:o,color:"from-red-500 to-pink-500"},{title:"Total Paid",value:J(X),icon:n,color:"from-emerald-500 to-teal-500"},{title:"Next Due",value:J(50),icon:b,color:"from-orange-500 to-yellow-500"}].map((e,a)=>t.jsxs(p.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.2+.1*a},className:"relative group",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/80 to-white/40 dark:from-slate-800/80 dark:to-slate-800/40 rounded-2xl border border-white/20 dark:border-slate-700/20 backdrop-blur-sm shadow-xl hover:shadow-2xl transition-all duration-500"}),t.jsxs("div",{className:"relative p-6 rounded-2xl",children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-r ${e.color} flex items-center justify-center shadow-lg`,children:t.jsx(e.icon,{className:"w-6 h-6 text-white"})})}),t.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-2",children:e.title}),t.jsx("p",{className:"text-3xl font-bold bg-gradient-to-r from-slate-900 to-slate-700 dark:from-white dark:to-slate-300 bg-clip-text text-transparent",children:e.value})]})]},e.title))}),t.jsx(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"space-y-6",children:billsLoading?t.jsx("div",{className:"space-y-4",children:[1,2,3].map(e=>t.jsx("div",{className:"bg-white/80 dark:bg-slate-800/80 rounded-2xl p-6 border border-white/20 dark:border-slate-700/20 backdrop-blur-sm shadow-xl animate-pulse",children:t.jsxs("div",{className:"flex items-start space-x-4",children:[t.jsx("div",{className:"w-14 h-14 bg-slate-200 dark:bg-slate-700 rounded-2xl"}),t.jsxs("div",{className:"flex-1 space-y-3",children:[t.jsx("div",{className:"h-6 bg-slate-200 dark:bg-slate-700 rounded w-1/3"}),t.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-2/3"}),t.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-1/2"})]})]})},e))}):billsError?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl flex items-center justify-center shadow-2xl",children:t.jsx(o,{className:"w-10 h-10 text-white"})}),t.jsx("p",{className:"text-red-600 dark:text-red-400 text-lg font-medium",children:"Error loading bills"}),t.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2",children:"Please try refreshing the page"})]}):0===Y.length?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gradient-to-br from-blue-500 to-purple-500 rounded-2xl flex items-center justify-center shadow-2xl",children:t.jsx(f,{className:"w-10 h-10 text-white"})}),t.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg font-medium",children:"No bills found"}),t.jsx("p",{className:"text-slate-500 dark:text-slate-500 mt-2",children:k?"Try adjusting your search criteria":"You have no outstanding bills"})]}):Y.map((e,r)=>t.jsxs(p.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.4+.1*r},whileHover:{scale:1.01,y:-5},className:"relative group",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/80 to-white/40 dark:from-slate-800/80 dark:to-slate-800/40 rounded-2xl border border-white/20 dark:border-slate-700/20 backdrop-blur-sm shadow-xl hover:shadow-2xl transition-all duration-500"}),t.jsx("div",{className:"relative p-6 rounded-2xl",children:t.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[t.jsxs("div",{className:"flex items-start space-x-4",children:[t.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center shadow-lg",children:a.createElement(q(e.type),{className:"w-7 h-7 text-white"})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[t.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:e.description}),t.jsx("div",{className:`px-3 py-1 bg-gradient-to-r ${"paid"===e.status?"from-emerald-500 to-teal-500":"pending"===e.status?"from-blue-500 to-indigo-500":"overdue"===e.status?"from-red-500 to-pink-500":"from-orange-500 to-yellow-500"} text-white rounded-full text-sm font-medium shadow-lg`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-slate-600 dark:text-slate-400 mb-3",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-100 to-blue-200 dark:from-blue-900/30 dark:to-blue-800/30 rounded-lg flex items-center justify-center",children:t.jsx(c,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),t.jsxs("span",{className:"font-medium",children:["Due: ",K(e.dueDate)]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-emerald-100 to-emerald-200 dark:from-emerald-900/30 dark:to-emerald-800/30 rounded-lg flex items-center justify-center",children:t.jsx(g,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})}),t.jsxs("span",{className:"font-medium",children:["Amount: ",J(e.amount)]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-100 to-purple-200 dark:from-purple-900/30 dark:to-purple-800/30 rounded-lg flex items-center justify-center",children:t.jsx(m,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"})}),t.jsx("span",{className:"font-medium",children:e.provider})]})]})]})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs(s,{onClick:()=>(e=>{B(e),M(!0)})(e),className:"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white shadow-lg hover:shadow-xl",children:[t.jsx(j,{className:"w-4 h-4 mr-2"}),"View Details"]}),"pending"===e.status&&t.jsxs(s,{onClick:Q,className:"bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 text-white shadow-lg hover:shadow-xl",children:[t.jsx(x,{className:"w-4 h-4 mr-2"}),"Pay Now"]})]})]})})]},e.id))})]}),t.jsx(r,{isOpen:A,onClose:()=>M(!1),title:"Bill Details",size:"lg",children:P&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center",children:a.createElement(q(P.type),{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:P.description}),t.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:P.provider})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(c,{className:"w-5 h-5 text-blue-500"}),t.jsxs("span",{className:"text-slate-700 dark:text-slate-300",children:["Date: ",K(P.date)]})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(b,{className:"w-5 h-5 text-emerald-500"}),t.jsxs("span",{className:"text-slate-700 dark:text-slate-300",children:["Due: ",K(P.dueDate)]})]})]})]}),t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:"p-4 bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800/50 dark:to-slate-700/50 rounded-xl border border-slate-200 dark:border-slate-600",children:[t.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white mb-2",children:"Amount"}),t.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:J(P.amount)})]})})]}),t.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-slate-200 dark:border-slate-600",children:[t.jsx(s,{onClick:()=>M(!1),className:"bg-gradient-to-r from-slate-500 to-slate-600 hover:from-slate-600 hover:to-slate-700 text-white shadow-lg hover:shadow-xl",children:"Close"}),("pending"===P.status||"overdue"===P.status)&&t.jsxs(s,{className:"bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 text-white shadow-lg hover:shadow-xl",onClick:()=>{M(!1),Q()},children:[t.jsx(x,{className:"w-4 h-4 mr-2"}),"Pay Now"]})]})]})}),t.jsx(r,{isOpen:L,onClose:()=>E(!1),title:"Make Payment",size:"lg",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Payment Method"}),t.jsxs("select",{value:F,onChange:e=>z(e.target.value),className:"w-full px-4 py-3 border-2 border-slate-200 dark:border-slate-600 rounded-xl bg-white/80 dark:bg-slate-700/80 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300",children:[t.jsx("option",{value:"",children:"Select payment method..."}),[{id:"1",type:"credit-card",name:"Visa ending in 1234",last4:"1234",expiryDate:"12/25",isDefault:!0},{id:"2",type:"debit-card",name:"Mastercard ending in 5678",last4:"5678",expiryDate:"08/26",isDefault:!1}].map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Amount to Pay"}),t.jsxs("div",{className:"relative",children:[t.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",children:"$"}),t.jsx("input",{type:"number",placeholder:"0.00",value:I,onChange:e=>T(e.target.value),className:"pl-8 w-full px-4 py-3 border-2 border-slate-200 dark:border-slate-600 rounded-xl bg-white/80 dark:bg-slate-700/80 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300",min:"0",step:"0.01"})]})]}),t.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[t.jsx(s,{onClick:()=>E(!1),className:"bg-gradient-to-r from-slate-500 to-slate-600 hover:from-slate-600 hover:to-slate-700 text-white shadow-lg hover:shadow-xl",children:"Cancel"}),t.jsxs(s,{onClick:async()=>{if(F&&I)try{await _({billId:null==P?void 0:P.id,amount:parseFloat(I),paymentMethodId:F,patientId:y.profile_id}),alert("Payment processed successfully!")}catch(e){alert("Failed to process payment. Please try again.")}else alert("Please select a payment method and enter an amount")},disabled:H,className:"bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 text-white shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx(v,{className:"w-4 h-4 mr-2"}),"Process Payment"]})]})]})})]})}export{y as BillingPage};
