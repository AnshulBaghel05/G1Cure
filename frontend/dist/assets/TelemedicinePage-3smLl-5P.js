import{r as e,j as s}from"./ui-77ih3y5-.js";import{u as a}from"./useQuery-Dlp3A4Ud.js";import{c as t,x as i,y as l,j as n,k as c,l as r,z as d,X as o,m,V as x,D as h,S as j,N as p,F as u,I as N,O as g,H as f,a as v,C as y,E as b,P as w,G as S,g as k,J as I}from"./index-Dujr78kO.js";import{u as A}from"./useMutation-DHGRmv7m.js";import{L as C}from"./label-l12jvvxt.js";import{S as D,a as F,b as R,c as M,d as P}from"./select-DGXQeRqO.js";import{b as T}from"./client-B8Nu1JAV.js";import{T as $}from"./textarea-DP8UPA2I.js";import{A as z}from"./AnimatedSwitch-BN7DuEm1.js";import{W as L,M as q,a as V}from"./wifi--S1o7bTM.js";import{S as H}from"./shield-DYQcWHH-.js";import{B as E}from"./brain-DV2drEwe.js";import{M as U}from"./monitor-Dpsn3D5r.js";import{A as Q}from"./activity-7thVPbvO.js";import{T as B}from"./thermometer-I4_6By_-.js";import{T as K}from"./target-C6nWdxbV.js";import{E as O}from"./eye-BknmmNLs.js";import{P as G}from"./pill-mOhGjarN.js";import{m as J}from"./animations-B6zYn4RS.js";import{T as W}from"./trending-up-B_ehj4Dk.js";import{C as _}from"./clock-BSH9Dcvi.js";import{P as X}from"./play-CGvpv7pH.js";import{E as Y}from"./external-link-BgoXYa56.js";import"./vendor-DZByZrCh.js";import"./charts-BdQpHC93.js";import"./chevron-down-CaI_Em0f.js";import"./check-QCXJeeDZ.js";
/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=t("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),ee=t("monitor-off",[["path",{d:"M17 17H4a2 2 0 0 1-2-2V5c0-1.5 1-2 1-2",key:"k0q8oc"}],["path",{d:"M22 15V5a2 2 0 0 0-2-2H9",key:"cp1ac0"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),se=t("phone-off",[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]]),ae=t("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),te=t("video-off",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);function ie({appointments:a,patients:t,doctors:x,onClose:h,onSuccess:j}){const{t:p}=i(),{toast:u}=l(),[N,g]=e.useState({appointmentId:"",patientId:"",doctorId:""}),f=A({mutationFn:async e=>await T.telemedicine.createSession(e),onSuccess:()=>{j()},onError:e=>{u({title:p("common.error"),description:"Failed to create telemedicine session",variant:"destructive"})}}),v=(e,s)=>{if(g(a=>({...a,[e]:s})),"appointmentId"===e){const e=a.find(e=>e.id===s);e&&g(a=>({...a,appointmentId:s,patientId:e.patientId,doctorId:e.doctorId}))}},y=f.isPending,b=e=>{const s=t.find(s=>s.id===e);return s?`${s.firstName} ${s.lastName}`:"Unknown Patient"},w=e=>{const s=x.find(s=>s.id===e);return s?`Dr. ${s.firstName} ${s.lastName}`:"Unknown Doctor"};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:e=>e.target===e.currentTarget&&h(),children:s.jsx("div",{className:"w-full max-w-md",children:s.jsxs(n,{children:[s.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[s.jsx(r,{className:"text-xl",children:"Create Telemedicine Session"}),s.jsx(d,{variant:"ghost",size:"sm",onClick:h,children:s.jsx(o,{className:"w-4 h-4"})})]}),s.jsx(m,{children:s.jsxs("form",{onSubmit:async e=>{e.preventDefault(),N.appointmentId&&N.patientId&&N.doctorId?f.mutate(N):u({title:p("common.error"),description:"Please fill in all required fields",variant:"destructive"})},className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"appointmentId",children:"Appointment"}),s.jsxs(D,{value:N.appointmentId,onValueChange:e=>v("appointmentId",e),children:[s.jsx(F,{children:s.jsx(R,{placeholder:"Select appointment"})}),s.jsx(M,{children:a.filter(e=>"telemedicine"===e.type&&"completed"!==e.status&&"cancelled"!==e.status).map(e=>s.jsxs(P,{value:e.id,children:[new Date(e.appointmentDate).toLocaleDateString()," - ",b(e.patientId)," with ",w(e.doctorId)]},e.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"patientId",children:"Patient"}),s.jsxs(D,{value:N.patientId,onValueChange:e=>v("patientId",e),children:[s.jsx(F,{children:s.jsx(R,{placeholder:"Select patient"})}),s.jsx(M,{children:t.map(e=>s.jsxs(P,{value:e.id,children:[e.firstName," ",e.lastName]},e.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"doctorId",children:"Doctor"}),s.jsxs(D,{value:N.doctorId,onValueChange:e=>v("doctorId",e),children:[s.jsx(F,{children:s.jsx(R,{placeholder:"Select doctor"})}),s.jsx(M,{children:x.map(e=>s.jsxs(P,{value:e.id,children:["Dr. ",e.firstName," ",e.lastName," - ",e.specialization]},e.id))})]})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx(d,{type:"submit",disabled:y,className:"flex-1",children:y?p("common.loading"):"Create Session"}),s.jsx(d,{type:"button",variant:"outline",onClick:h,disabled:y,children:p("common.cancel")})]})]})})]})})})}function le({sessionId:a,patientId:t,doctorId:i,onEndSession:o}){const{toast:b}=l(),[w,S]=e.useState(!0),[k,I]=e.useState(!1),[A,C]=e.useState(!1),[D,F]=e.useState(!0),[R,M]=e.useState(!0),[P,T]=e.useState(!1),[J,W]=e.useState(!1),[_,X]=e.useState(!1),[Y,ie]=e.useState(!0),[le,ne]=e.useState(!0),[ce,re]=e.useState(!0),[de,oe]=e.useState({heartRate:72,bloodPressure:{systolic:120,diastolic:80},temperature:98.6,oxygenSaturation:98,respiratoryRate:16,timestamp:new Date}),[me,xe]=e.useState({symptomAnalysis:"Patient appears to have mild symptoms consistent with seasonal allergies. No immediate concerns detected.",confidence:87,recommendations:["Monitor symptoms for 24-48 hours","Consider over-the-counter antihistamines","Schedule follow-up if symptoms worsen"],riskLevel:"low",suggestedTests:["Blood work","Allergy panel"],medicationSuggestions:["Cetirizine","Fluticasone nasal spray"]}),[he,je]=e.useState({duration:0,quality:"excellent",bandwidth:15.2,latency:45,packetLoss:.1,recordingSize:0,aiInsights:12}),[pe,ue]=e.useState([]),[Ne,ge]=e.useState(""),[fe,ve]=e.useState(""),[ye,be]=e.useState(""),[we,Se]=e.useState(""),[ke,Ie]=e.useState(""),Ae=e.useRef(new Date),Ce=e.useRef(),De=e.useRef();e.useEffect(()=>{Ce.current=setInterval(()=>{oe(e=>({...e,heartRate:e.heartRate+4*(Math.random()-.5),temperature:e.temperature+.2*(Math.random()-.5),timestamp:new Date}))},5e3),De.current=setInterval(()=>{xe(e=>({...e,confidence:Math.min(100,e.confidence+5*(Math.random()-.5))}))},1e4);const e=setInterval(()=>{je(e=>({...e,duration:Math.floor(((new Date).getTime()-Ae.current.getTime())/1e3)}))},1e3);return()=>{Ce.current&&clearInterval(Ce.current),De.current&&clearInterval(De.current),clearInterval(e)}},[]);const Fe=()=>{I(!0),b({title:"Recording Started",description:"Session is now being recorded for medical records"})},Re=()=>{I(!1),b({title:"Recording Stopped",description:"Session recording has been saved"})},Me=()=>{X(!0),b({title:"AI Analysis",description:"AI is analyzing the session for insights and recommendations"})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[s.jsx(x,{className:"w-6 h-6 text-blue-600"}),"Advanced Telemedicine Session"]}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Session ID: ",a," | AI-Powered Healthcare Consultation"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(h,{className:"bg-green-100 text-green-800",children:[s.jsx(L,{className:"w-3 h-3 mr-1"}),"Connected"]}),s.jsxs(h,{className:"bg-blue-100 text-blue-800",children:[s.jsx(H,{className:"w-3 h-3 mr-1"}),"HIPAA Secure"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[s.jsx(n,{className:"relative",children:s.jsxs(m,{className:"p-0",children:[s.jsx("div",{className:"aspect-video bg-gray-900 rounded-t-lg flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-white",children:[s.jsx(x,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),s.jsx("p",{className:"text-lg font-medium",children:"Video Stream"}),s.jsx("p",{className:"text-sm opacity-75",children:"High-quality HD video consultation"})]})}),s.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:s.jsxs("div",{className:"flex items-center justify-between bg-black/50 backdrop-blur-sm rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-white",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-sm",children:"Live"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(d,{size:"sm",variant:"ghost",className:"text-white hover:bg-white/20",children:s.jsx(j,{className:"w-4 h-4"})}),s.jsx(d,{size:"sm",variant:"ghost",className:"text-white hover:bg-white/20",children:s.jsx(p,{className:"w-4 h-4"})})]})]})})]})}),s.jsxs("div",{className:"flex items-center justify-center gap-4 p-4 bg-gray-100 rounded-lg",children:[s.jsxs(d,{variant:D?"default":"destructive",size:"sm",onClick:()=>F(!D),className:"flex items-center gap-2",children:[D?s.jsx(q,{className:"w-4 h-4"}):s.jsx(V,{className:"w-4 h-4"}),D?"Mute":"Unmute"]}),s.jsxs(d,{variant:R?"default":"destructive",size:"sm",onClick:()=>M(!R),className:"flex items-center gap-2",children:[R?s.jsx(x,{className:"w-4 h-4"}):s.jsx(te,{className:"w-4 h-4"}),R?"Stop Video":"Start Video"]}),s.jsxs(d,{variant:A?"default":"outline",size:"sm",onClick:()=>C(!A),className:"flex items-center gap-2",children:[A?s.jsx(ee,{className:"w-4 h-4"}):s.jsx(U,{className:"w-4 h-4"}),A?"Stop Sharing":"Share Screen"]}),s.jsxs(d,{variant:k?"destructive":"outline",size:"sm",onClick:k?Re:Fe,className:"flex items-center gap-2",children:[k?s.jsx(ae,{className:"w-4 h-4"}):s.jsx(Z,{className:"w-4 h-4"}),k?"Stop Recording":"Start Recording"]}),s.jsxs(d,{variant:"outline",size:"sm",onClick:()=>T(!P),className:"flex items-center gap-2",children:[s.jsx(g,{className:"w-4 h-4"}),"Chat"]}),s.jsxs(d,{variant:"outline",size:"sm",onClick:Me,className:"flex items-center gap-2",children:[s.jsx(E,{className:"w-4 h-4"}),"AI Analysis"]}),s.jsxs(d,{variant:"destructive",size:"sm",onClick:o,className:"flex items-center gap-2",children:[s.jsx(se,{className:"w-4 h-4"}),"End Call"]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs(n,{className:"border-green-200 bg-green-50/50",children:[s.jsx(c,{className:"pb-3",children:s.jsxs(r,{className:"flex items-center gap-2 text-green-800",children:[s.jsx(Q,{className:"w-5 h-5"}),"Real-Time Vitals Monitor"]})}),s.jsx(m,{children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[s.jsx(f,{className:"w-5 h-5 text-red-500"}),s.jsx("span",{className:"text-sm font-medium",children:"Heart Rate"})]}),s.jsx("div",{className:"text-2xl font-bold text-red-600",children:de.heartRate.toFixed(0)}),s.jsx("div",{className:"text-xs text-gray-600",children:"bpm"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[s.jsx(Q,{className:"w-5 h-5 text-blue-500"}),s.jsx("span",{className:"text-sm font-medium",children:"Blood Pressure"})]}),s.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[de.bloodPressure.systolic,"/",de.bloodPressure.diastolic]}),s.jsx("div",{className:"text-xs text-gray-600",children:"mmHg"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[s.jsx(B,{className:"w-5 h-5 text-orange-500"}),s.jsx("span",{className:"text-sm font-medium",children:"Temperature"})]}),s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:de.temperature.toFixed(1)}),s.jsx("div",{className:"text-xs text-gray-600",children:"°F"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[s.jsx(K,{className:"w-5 h-5 text-purple-500"}),s.jsx("span",{className:"text-sm font-medium",children:"O2 Saturation"})]}),s.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[de.oxygenSaturation,"%"]}),s.jsx("div",{className:"text-xs text-gray-600",children:"SpO2"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[s.jsx(O,{className:"w-5 h-5 text-indigo-500"}),s.jsx("span",{className:"text-sm font-medium",children:"Respiratory"})]}),s.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:de.respiratoryRate}),s.jsx("div",{className:"text-xs text-gray-600",children:"breaths/min"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[s.jsx(E,{className:"w-5 h-5 text-green-500"}),s.jsx("span",{className:"text-sm font-medium",children:"AI Confidence"})]}),s.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[me.confidence.toFixed(0),"%"]}),s.jsx("div",{className:"text-xs text-gray-600",children:"analysis"})]})]})})]}),s.jsxs(n,{className:"border-blue-200 bg-blue-50/50",children:[s.jsx(c,{className:"pb-3",children:s.jsxs(r,{className:"flex items-center gap-2 text-blue-800",children:[s.jsx(E,{className:"w-5 h-5"}),"AI-Powered Analysis"]})}),s.jsxs(m,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold mb-2",children:"Symptom Analysis"}),s.jsx("p",{className:"text-sm text-gray-700 mb-3",children:me.symptomAnalysis}),s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx("span",{className:"text-sm font-medium",children:"Risk Level:"}),s.jsx(h,{className:"low"===me.riskLevel?"bg-green-100 text-green-800":"medium"===me.riskLevel?"bg-yellow-100 text-yellow-800":"high"===me.riskLevel?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800",children:me.riskLevel.toUpperCase()})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium",children:"Confidence:"}),s.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${me.confidence}%`}})}),s.jsxs("span",{className:"text-sm font-medium",children:[me.confidence.toFixed(0),"%"]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold mb-2",children:"Recommendations"}),s.jsx("ul",{className:"space-y-2",children:me.recommendations.map((e,a)=>s.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[s.jsx(v,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:e})]},a))}),s.jsx("h4",{className:"font-semibold mb-2 mt-4",children:"Suggested Tests"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:me.suggestedTests.map((e,a)=>s.jsx(h,{variant:"outline",className:"text-xs",children:e},a))})]})]}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsx("h4",{className:"font-semibold mb-2",children:"Medication Suggestions"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:me.medicationSuggestions.map((e,a)=>s.jsxs(h,{variant:"outline",className:"text-xs",children:[s.jsx(G,{className:"w-3 h-3 mr-1"}),e]},a))})]})]})]}),s.jsxs(n,{className:"border-purple-200 bg-purple-50/50",children:[s.jsx(c,{className:"pb-3",children:s.jsxs(r,{className:"flex items-center gap-2 text-purple-800",children:[s.jsx(y,{className:"w-5 h-5"}),"Session Analytics"]})}),s.jsx(m,{children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[Math.floor(he.duration/60),":",(he.duration%60).toString().padStart(2,"0")]}),s.jsx("div",{className:"text-xs text-gray-600",children:"Duration"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:he.quality}),s.jsx("div",{className:"text-xs text-gray-600",children:"Quality"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:he.bandwidth.toFixed(1)}),s.jsx("div",{className:"text-xs text-gray-600",children:"Mbps"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:he.aiInsights}),s.jsx("div",{className:"text-xs text-gray-600",children:"AI Insights"})]})]})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs(n,{children:[s.jsx(c,{children:s.jsxs(r,{className:"flex items-center gap-2",children:[s.jsx(u,{className:"w-5 h-5"}),"Auto Documentation"]})}),s.jsxs(m,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"Real-time Transcription"}),s.jsx(z,{checked:ce,onChange:re})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"Auto Notes Generation"}),s.jsx(z,{checked:le,onChange:ne})]}),s.jsx(d,{onClick:()=>{const e=`Session Notes - ${(new Date).toLocaleString()}\n    \nSymptoms: ${ye}\nDiagnosis: ${we}\nPrescription: ${ke}\n\nVital Signs:\n- Heart Rate: ${de.heartRate.toFixed(1)} bpm\n- Blood Pressure: ${de.bloodPressure.systolic}/${de.bloodPressure.diastolic} mmHg\n- Temperature: ${de.temperature.toFixed(1)}°F\n- Oxygen Saturation: ${de.oxygenSaturation}%\n\nAI Analysis Confidence: ${me.confidence}%\nRisk Level: ${me.riskLevel}\n\nRecommendations:\n${me.recommendations.map(e=>`- ${e}`).join("\n")}`;ve(e),b({title:"Auto Documentation",description:"Session notes have been automatically generated"})},className:"w-full",children:"Generate Session Notes"}),fe&&s.jsx($,{value:fe,readOnly:!0,className:"h-32 text-sm",placeholder:"Auto-generated session notes will appear here..."})]})]}),s.jsxs(n,{children:[s.jsx(c,{children:s.jsxs(r,{className:"flex items-center gap-2",children:[s.jsx(E,{className:"w-5 h-5"}),"AI Assistant"]})}),s.jsxs(m,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx(N,{placeholder:"Enter symptoms...",value:ye,onChange:e=>be(e.target.value)}),s.jsx(N,{placeholder:"Enter diagnosis...",value:we,onChange:e=>Se(e.target.value)}),s.jsx(N,{placeholder:"Enter prescription...",value:ke,onChange:e=>Ie(e.target.value)})]}),s.jsxs(d,{onClick:Me,className:"w-full",children:[s.jsx(E,{className:"w-4 h-4 mr-2"}),"Analyze with AI"]}),s.jsx("div",{className:"text-xs text-gray-600",children:"AI will analyze symptoms, suggest tests, and provide treatment recommendations"})]})]})]})]})}function ne(){const{t:t}=i(),{toast:o}=l(),j=b(),[p,u]=e.useState(""),[g,f]=e.useState(!1),[v,y]=e.useState("list"),[C,D]=e.useState(null),{data:F,isLoading:R,error:M}=a({queryKey:["telemedicine-sessions",p],queryFn:async()=>await T.telemedicine.listSessions({limit:100})}),{data:P}=a({queryKey:["appointments"],queryFn:async()=>await T.clinic.listAppointments({limit:1e3})}),{data:$}=a({queryKey:["patients"],queryFn:async()=>await T.clinic.listPatients({limit:1e3})}),{data:z}=a({queryKey:["doctors"],queryFn:async()=>await T.clinic.listDoctors({limit:1e3})}),L=A({mutationFn:async e=>await T.telemedicine.joinSession({id:e}),onSuccess:e=>{window.open(e.sessionUrl,"_blank"),o({title:t("common.success"),description:"Joining telemedicine session..."})},onError:e=>{o({title:t("common.error"),description:"Failed to join session",variant:"destructive"})}}),q=()=>{f(!1)},V=e=>{const s=null==$?void 0:$.patients.find(s=>s.id===e);return s?`${s.firstName} ${s.lastName}`:"Unknown Patient"},H=e=>{const s=null==z?void 0:z.doctors.find(s=>s.id===e);return s?`Dr. ${s.firstName} ${s.lastName}`:"Unknown Doctor"},U=e=>{switch(e){case"scheduled":return"bg-blue-100 text-blue-800";case"active":return"bg-green-100 text-green-800";case"completed":default:return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800"}};return M?s.jsx("div",{className:"text-center py-12",children:s.jsxs("p",{className:"text-red-600",children:[t("common.error"),": ",M.message]})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:t("nav.telemedicine")}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Advanced AI-powered telemedicine with real-time monitoring"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(d,{variant:"outline",onClick:()=>y("list"),className:"flex items-center gap-2",children:[s.jsx(x,{className:"w-4 h-4"}),"Sessions"]}),s.jsxs(d,{variant:"outline",onClick:()=>y("analytics"),className:"flex items-center gap-2",children:[s.jsx(W,{className:"w-4 h-4"}),"Analytics"]}),s.jsxs(d,{onClick:()=>f(!0),className:"flex items-center gap-2",children:[s.jsx(w,{className:"w-4 h-4"}),"Create Session"]})]})]}),"list"===v&&s.jsx(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"flex items-center gap-4",children:s.jsxs("div",{className:"relative flex-1 max-w-md",children:[s.jsx(S,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx(N,{placeholder:t("common.search"),value:p,onChange:e=>u(e.target.value),className:"pl-10"})]})}),R?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,a)=>s.jsxs(n,{className:"animate-pulse",children:[s.jsxs(c,{children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]}),s.jsx(m,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"h-3 bg-gray-200 rounded"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})})]},a))}):s.jsx(J.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:null==F?void 0:F.sessions.map((e,a)=>s.jsx(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*a},whileHover:{y:-2},children:s.jsxs(n,{className:"h-full transition-all duration-200 hover:shadow-md",children:[s.jsx(c,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:s.jsx(x,{className:"w-5 h-5 text-purple-600"})}),s.jsxs("div",{children:[s.jsxs(r,{className:"text-lg",children:["Session #",e.roomId.slice(-8)]}),s.jsx("p",{className:"text-sm text-gray-600",children:new Date(e.createdAt).toLocaleDateString()})]})]}),s.jsx(h,{className:U(e.status),children:e.status})]})}),s.jsxs(m,{className:"space-y-3",children:[s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(k,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-gray-600",children:"Patient:"}),s.jsx("span",{className:"font-medium",children:V(e.patientId)})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(I,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-gray-600",children:"Doctor:"}),s.jsx("span",{className:"font-medium",children:H(e.doctorId)})]}),e.duration&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(_,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-gray-600",children:"Duration:"}),s.jsxs("span",{children:[e.duration," minutes"]})]})]}),e.startTime&&s.jsxs("div",{className:"text-xs text-gray-600",children:[s.jsx("span",{className:"font-medium",children:"Started:"})," ",new Date(e.startTime).toLocaleString()]}),e.notes&&s.jsxs("div",{className:"text-xs text-gray-600",children:[s.jsx("span",{className:"font-medium",children:"Notes:"})," ",e.notes]}),s.jsxs("div",{className:"flex gap-2 pt-2",children:[("scheduled"===e.status||"active"===e.status)&&s.jsxs(s.Fragment,{children:[s.jsxs(d,{size:"sm",onClick:()=>{return s=e.id,void L.mutate(s);var s},disabled:L.isPending,className:"flex-1",children:[s.jsx(X,{className:"w-3 h-3 mr-1"}),"Join Session"]}),s.jsxs(d,{variant:"outline",size:"sm",onClick:()=>(e=>{D(e),y("session")})(e),className:"flex-1",children:[s.jsx(E,{className:"w-3 h-3 mr-1"}),"Advanced"]})]}),e.recordingUrl&&s.jsxs(d,{variant:"outline",size:"sm",onClick:()=>window.open(e.recordingUrl,"_blank"),className:"flex-1",children:[s.jsx(Y,{className:"w-3 h-3 mr-1"}),"Recording"]})]})]})]})},e.id))}),0===(null==F?void 0:F.sessions.length)&&!R&&s.jsxs(J.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[s.jsx(x,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No telemedicine sessions found"}),s.jsx("p",{className:"text-gray-600 mb-4",children:p?"Try adjusting your search terms":"Get started by creating your first telemedicine session"}),s.jsxs(d,{onClick:()=>f(!0),children:[s.jsx(w,{className:"w-4 h-4 mr-2"}),"Create Session"]})]}),"session"===v&&C&&s.jsxs(J.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[s.jsx("div",{className:"mb-4",children:s.jsx(d,{variant:"outline",onClick:()=>y("list"),className:"mb-4",children:"← Back to Sessions"})}),s.jsx(le,{sessionId:C.id,patientId:C.patientId,doctorId:C.doctorId,onEndSession:()=>{D(null),y("list"),o({title:"Session Ended",description:"Telemedicine session has been ended"})}})]}),"analytics"===v&&s.jsxs(J.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsxs(n,{children:[s.jsx(c,{className:"pb-3",children:s.jsxs(r,{className:"text-lg flex items-center gap-2",children:[s.jsx(x,{className:"w-5 h-5 text-blue-600"}),"Total Sessions"]})}),s.jsx(m,{children:s.jsx("div",{className:"text-3xl font-bold text-blue-600",children:(null==F?void 0:F.sessions.length)||0})})]}),s.jsxs(n,{children:[s.jsx(c,{className:"pb-3",children:s.jsxs(r,{className:"text-lg flex items-center gap-2",children:[s.jsx(Q,{className:"w-5 h-5 text-green-600"}),"Active Sessions"]})}),s.jsx(m,{children:s.jsx("div",{className:"text-3xl font-bold text-green-600",children:(null==F?void 0:F.sessions.filter(e=>"active"===e.status).length)||0})})]}),s.jsxs(n,{children:[s.jsx(c,{className:"pb-3",children:s.jsxs(r,{className:"text-lg flex items-center gap-2",children:[s.jsx(E,{className:"w-5 h-5 text-purple-600"}),"AI Insights"]})}),s.jsx(m,{children:s.jsx("div",{className:"text-3xl font-bold text-purple-600",children:"32"})})]}),s.jsxs(n,{children:[s.jsx(c,{className:"pb-3",children:s.jsxs(r,{className:"text-lg flex items-center gap-2",children:[s.jsx(W,{className:"w-5 h-5 text-orange-600"}),"Quality Score"]})}),s.jsx(m,{children:s.jsx("div",{className:"text-3xl font-bold text-orange-600",children:"96%"})})]})]}),s.jsxs(n,{children:[s.jsx(c,{children:s.jsx(r,{children:"Telemedicine Analytics"})}),s.jsx(m,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-2",children:"Session Status"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Active:"}),s.jsx("span",{className:"font-semibold",children:"15%"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Completed:"}),s.jsx("span",{className:"font-semibold",children:"70%"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Cancelled:"}),s.jsx("span",{className:"font-semibold",children:"15%"})]})]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600 mb-2",children:"Quality Metrics"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Video Quality:"}),s.jsx("span",{className:"font-semibold",children:"98%"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Audio Quality:"}),s.jsx("span",{className:"font-semibold",children:"95%"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Connection:"}),s.jsx("span",{className:"font-semibold",children:"99%"})]})]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600 mb-2",children:"AI Features"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Auto Notes:"}),s.jsx("span",{className:"font-semibold",children:"85%"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Vitals Monitor:"}),s.jsx("span",{className:"font-semibold",children:"92%"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"AI Analysis:"}),s.jsx("span",{className:"font-semibold",children:"78%"})]})]})]})]})})]})]}),g&&s.jsx(ie,{appointments:(null==P?void 0:P.appointments)||[],patients:(null==$?void 0:$.patients)||[],doctors:(null==z?void 0:z.doctors)||[],onClose:q,onSuccess:()=>{j.invalidateQueries({queryKey:["telemedicine-sessions"]}),q(),o({title:t("common.success"),description:"Telemedicine session created successfully"})}})]})}export{ne as TelemedicinePage};
