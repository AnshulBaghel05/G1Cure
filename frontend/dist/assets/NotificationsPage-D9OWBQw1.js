import{r as e,j as t,R as a}from"./ui-77ih3y5-.js";import{A as s}from"./AnimatedButton-Bcc-K-Ct.js";import{A as i}from"./AnimatedModal-DoxFigkX.js";import{f as r,B as l,v as o,a as d,T as n,H as c,ad as m,F as x,d as h}from"./index-Dujr78kO.js";import{u as p}from"./backend-CGvABKuP.js";import{m as u}from"./animations-B6zYn4RS.js";import{C as g}from"./clock-BSH9Dcvi.js";import{E as b}from"./eye-BknmmNLs.js";import{S as f}from"./stethoscope-DHkBz6au.js";import"./vendor-DZByZrCh.js";import"./charts-BdQpHC93.js";import"./client-B8Nu1JAV.js";function j(){const{user:j}=r(),y=p(),[v,w]=e.useState(""),[N,k]=e.useState("all"),[R,S]=e.useState(null),[C,T]=e.useState(!1),[A,D]=e.useState([]),[$,P]=e.useState(!0),[_,L]=e.useState(null);e.useEffect(()=>{(async()=>{if(j)try{P(!0),L(null);const[e,t]=await Promise.all([y.clinic.listAppointments({patientId:j.profile_id||j.id,limit:10}),y.clinic.listBills({patientId:j.profile_id||j.id,limit:10})]),a=[];e.appointments.forEach(e=>{const t=new Date(e.appointmentDate),s=new Date,i=t.getTime()-s.getTime();1===Math.ceil(i/864e5)&&a.push({id:`appointment-${e.id}`,type:"appointment",title:"Appointment Reminder",message:`Your appointment is scheduled for tomorrow at ${t.toLocaleTimeString()}.`,timestamp:(new Date).toISOString(),isRead:!1,priority:"high",action:"View Details",actionUrl:"/patient/appointments"})}),t.bills.forEach(e=>{if("pending"===e.status){const t=new Date(e.dueDate),s=new Date,i=t.getTime()-s.getTime(),r=Math.ceil(i/864e5);r<=7&&a.push({id:`billing-${e.id}`,type:"billing",title:"Payment Due",message:`You have a payment of $${e.amount} due ${r>0?`in ${r} days`:"today"}.`,timestamp:(new Date).toISOString(),isRead:!1,priority:r<=3?"high":"medium",action:"Pay Now",actionUrl:"/patient/billing"})}}),a.push({id:"system-1",type:"system",title:"Welcome to G1Cure",message:"Thank you for using G1Cure. Your health is our priority.",timestamp:(new Date).toISOString(),isRead:!1,priority:"low",action:"Learn More",actionUrl:"/patient/help"}),D(a)}catch(e){L("Failed to load notifications. Please try again.");D([{id:"1",type:"appointment",title:"Appointment Reminder",message:"Your appointment with Dr. Sarah Johnson is scheduled for tomorrow at 10:00 AM.",timestamp:"2024-01-19T08:00:00Z",isRead:!1,priority:"high",action:"View Details",actionUrl:"/appointments"},{id:"2",type:"medical",title:"Lab Results Available",message:"Your recent blood test results are now available in your medical records.",timestamp:"2024-01-18T14:30:00Z",isRead:!1,priority:"medium",action:"View Results",actionUrl:"/medical-records"},{id:"3",type:"billing",title:"Payment Due",message:"You have a payment of $150.00 due in 3 days.",timestamp:"2024-01-17T10:00:00Z",isRead:!1,priority:"high",action:"Pay Now",actionUrl:"/billing"}])}finally{P(!1)}})()},[j,y]);const M=async e=>(await new Promise(e=>setTimeout(e,500)),{success:!0}),U=!1,E=async()=>(await new Promise(e=>setTimeout(e,1e3)),{success:!0}),I=!1,Y=e=>{switch(e){case"appointment":return h;case"medical":return f;case"billing":return x;case"system":return m;case"reminder":return c;default:return l}},O=e=>{switch(e){case"high":return"from-red-500 to-pink-500";case"medium":return"from-orange-500 to-yellow-500";case"low":return"from-blue-500 to-indigo-500";default:return"from-slate-500 to-slate-600"}},z=e=>{switch(e){case"appointment":return"from-blue-500 to-indigo-500";case"medical":return"from-emerald-500 to-teal-500";case"billing":return"from-purple-500 to-pink-500";case"system":default:return"from-slate-500 to-slate-600";case"reminder":return"from-orange-500 to-red-500"}},B=A.filter(e=>{const t=e.title.toLowerCase().includes(v.toLowerCase())||e.message.toLowerCase().includes(v.toLowerCase()),a="all"===N||e.type===N;return t&&a}),V=A.filter(e=>!e.isRead).length,F=A.filter(e=>"high"===e.priority&&!e.isRead).length,H=async e=>{try{await M(e)}catch(t){alert("Failed to mark notification as read. Please try again.")}},Z=e=>{const t=new Date(e),a=new Date,s=Math.floor((a.getTime()-t.getTime())/36e5);return s<1?"Just now":s<24?`${s} hour${s>1?"s":""} ago`:s<48?"Yesterday":t.toLocaleDateString()};return $?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading notifications..."})]})}):_?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),t.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Error Loading Notifications"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:_}),t.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Try Again"})]})}):t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 relative overflow-hidden",children:[t.jsxs("div",{className:"fixed inset-0 opacity-5 dark:opacity-10",children:[t.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(59,130,246,0.1)_1px,transparent_1px),linear-gradient(90deg,rgba(59,130,246,0.1)_1px,transparent_1px)] bg-[size:50px_50px]"}),t.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(147,51,234,0.1)_1px,transparent_1px),linear-gradient(90deg,rgba(147,51,234,0.1)_1px,transparent_1px)] bg-[size:30px_30px]"})]}),t.jsxs("div",{className:"fixed inset-0 pointer-events-none",children:[t.jsx(u.div,{animate:{y:[0,-20,0],rotate:[0,5,-5,0]},transition:{duration:6,repeat:1/0,ease:"easeInOut"},className:"absolute top-20 left-10 text-6xl opacity-10 dark:opacity-20",children:t.jsx(l,{className:"text-blue-400"})}),t.jsx(u.div,{animate:{y:[0,20,0],rotate:[0,-5,5,0]},transition:{duration:8,repeat:1/0,ease:"easeInOut",delay:2},className:"absolute top-40 right-20 text-5xl opacity-10 dark:opacity-20",children:t.jsx(o,{className:"text-purple-400"})}),t.jsx(u.div,{animate:{y:[0,-15,0],rotate:[0,3,-3,0]},transition:{duration:7,repeat:1/0,ease:"easeInOut",delay:4},className:"absolute bottom-40 left-20 text-4xl opacity-10 dark:opacity-20",children:t.jsx(d,{className:"text-emerald-400"})})]}),t.jsxs("div",{className:"relative z-10 space-y-8 p-8",children:[t.jsx(u.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx(u.h1,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},className:"text-5xl md:text-6xl font-bold bg-gradient-to-r from-slate-900 via-blue-900 to-purple-900 dark:from-white dark:via-blue-200 dark:to-purple-200 bg-clip-text text-transparent",children:"Notifications"}),t.jsx(u.p,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},className:"text-xl text-slate-600 dark:text-slate-300 mt-3",children:"Stay updated with your healthcare information and important reminders"})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx(n,{}),t.jsxs(s,{onClick:async()=>{try{await E(),alert("All notifications marked as read!")}catch(e){alert("Failed to mark all notifications as read. Please try again.")}},disabled:I,className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white shadow-lg hover:shadow-xl px-6 py-3 rounded-xl font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx(d,{className:"w-5 h-5 mr-2"}),"Mark All Read"]})]})]})}),t.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[{title:"Unread Notifications",value:V.toString(),icon:l,color:"from-blue-500 to-indigo-500",change:`${V} new`},{title:"High Priority",value:F.toString(),icon:o,color:"from-red-500 to-pink-500",change:"Requires attention"},{title:"Total Notifications",value:A.length.toString(),icon:d,color:"from-emerald-500 to-teal-500",change:"All time"}].map((e,a)=>t.jsxs(u.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.2+.1*a},className:"relative group",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/80 to-white/40 dark:from-slate-800/80 dark:to-slate-800/40 rounded-2xl border border-white/20 dark:border-slate-700/20 backdrop-blur-sm shadow-xl hover:shadow-2xl transition-all duration-500"}),t.jsxs("div",{className:"relative p-6 rounded-2xl",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-r ${e.color} flex items-center justify-center shadow-lg`,children:t.jsx(e.icon,{className:"w-6 h-6 text-white"})}),t.jsx("div",{className:"px-3 py-1 rounded-full text-xs font-medium bg-slate-100 text-slate-700 dark:bg-slate-700/30 dark:text-slate-400",children:e.change})]}),t.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-2",children:e.title}),t.jsx("p",{className:"text-3xl font-bold bg-gradient-to-r from-slate-900 to-slate-700 dark:from-white dark:to-slate-300 bg-clip-text text-transparent",children:e.value})]})]},e.title))}),t.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"mb-8",children:t.jsxs("div",{className:"relative group",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/80 to-white/40 dark:from-slate-800/80 dark:to-slate-800/40 rounded-2xl border border-white/20 dark:border-slate-700/20 backdrop-blur-sm shadow-xl hover:shadow-2xl transition-all duration-500"}),t.jsx("div",{className:"relative p-6 rounded-2xl",children:t.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[t.jsx("div",{className:"flex-1 max-w-md",children:t.jsxs("div",{className:"relative",children:[t.jsx(l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),t.jsx("input",{type:"text",placeholder:"Search notifications...",value:v,onChange:e=>w(e.target.value),className:"pl-10 w-full px-4 py-3 border-2 border-slate-200 dark:border-slate-600 rounded-xl bg-white/80 dark:bg-slate-700/80 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300"})]})}),t.jsxs("select",{value:N,onChange:e=>k(e.target.value),className:"px-4 py-3 border-2 border-slate-200 dark:border-slate-600 rounded-xl bg-white/80 dark:bg-slate-700/80 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300",children:[t.jsx("option",{value:"all",children:"All Types"}),t.jsx("option",{value:"appointment",children:"Appointments"}),t.jsx("option",{value:"medical",children:"Medical"}),t.jsx("option",{value:"billing",children:"Billing"}),t.jsx("option",{value:"system",children:"System"}),t.jsx("option",{value:"reminder",children:"Reminders"})]})]})})]})}),t.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"space-y-6",children:notificationsLoading?t.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(e=>t.jsx("div",{className:"bg-white/80 dark:bg-slate-800/80 rounded-2xl p-6 border border-white/20 dark:border-slate-700/20 backdrop-blur-sm shadow-xl animate-pulse",children:t.jsxs("div",{className:"flex items-start space-x-4",children:[t.jsx("div",{className:"w-14 h-14 bg-slate-200 dark:bg-slate-700 rounded-2xl"}),t.jsxs("div",{className:"flex-1 space-y-3",children:[t.jsx("div",{className:"h-6 bg-slate-200 dark:bg-slate-700 rounded w-1/3"}),t.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-2/3"}),t.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-1/2"})]})]})},e))}):notificationsError?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl flex items-center justify-center shadow-2xl",children:t.jsx(o,{className:"w-10 h-10 text-white"})}),t.jsx("p",{className:"text-red-600 dark:text-red-400 text-lg font-medium",children:"Error loading notifications"}),t.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2",children:"Please try refreshing the page"})]}):0===B.length?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gradient-to-br from-blue-500 to-purple-500 rounded-2xl flex items-center justify-center shadow-2xl",children:t.jsx(l,{className:"w-10 h-10 text-white"})}),t.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg font-medium",children:"No notifications found"}),t.jsx("p",{className:"text-slate-500 dark:text-slate-500 mt-2",children:v?"Try adjusting your search criteria":"You have no notifications at the moment"})]}):B.map((e,i)=>t.jsxs(u.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.4+.1*i},whileHover:{scale:1.01,y:-5},className:"relative group "+(e.isRead?"":"ring-2 ring-blue-500/20"),children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/80 to-white/40 dark:from-slate-800/80 dark:to-slate-800/40 rounded-2xl border border-white/20 dark:border-slate-700/20 backdrop-blur-sm shadow-xl hover:shadow-2xl transition-all duration-500"}),t.jsx("div",{className:"relative p-6 rounded-2xl",children:t.jsxs("div",{className:"flex items-start space-x-4",children:[t.jsx("div",{className:`w-14 h-14 rounded-2xl bg-gradient-to-r ${z(e.type)} flex items-center justify-center shadow-lg`,children:a.createElement(Y(e.type),{className:"w-7 h-7 text-white"})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[t.jsx("h3",{className:"text-xl font-bold "+(e.isRead?"text-slate-600 dark:text-slate-400":"text-slate-900 dark:text-white"),children:e.title}),t.jsx("div",{className:`px-3 py-1 bg-gradient-to-r ${O(e.priority)} text-white rounded-full text-sm font-medium shadow-lg`,children:e.priority.charAt(0).toUpperCase()+e.priority.slice(1)}),!e.isRead&&t.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full animate-pulse"})]}),t.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-3 "+(e.isRead?"":"font-medium"),children:e.message}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4 text-sm text-slate-500 dark:text-slate-400",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(g,{className:"w-4 h-4"}),t.jsx("span",{children:Z(e.timestamp)})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:`w-2 h-2 rounded-full bg-gradient-to-r ${z(e.type)}`}),t.jsx("span",{className:"capitalize",children:e.type})]})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[e.action&&t.jsx(s,{className:"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white shadow-lg hover:shadow-xl",children:e.action}),t.jsxs(s,{onClick:()=>{S(e),T(!0)},className:"bg-gradient-to-r from-slate-500 to-slate-600 hover:from-slate-600 hover:to-slate-700 text-white shadow-lg hover:shadow-xl",children:[t.jsx(b,{className:"w-4 h-4 mr-2"}),"View"]}),!e.isRead&&t.jsxs(s,{onClick:()=>H(e.id),disabled:U,className:"bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 text-white shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx(d,{className:"w-4 h-4 mr-2"}),"Mark Read"]})]})]})]})]})})]},e.id))})]}),t.jsx(i,{isOpen:C,onClose:()=>T(!1),title:"Notification Details",size:"lg",children:R&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-r ${z(R.type)} flex items-center justify-center`,children:a.createElement(Y(R.type),{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:R.title}),t.jsx("p",{className:"text-slate-600 dark:text-slate-400 capitalize",children:R.type})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(g,{className:"w-5 h-5 text-blue-500"}),t.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:Z(R.timestamp)})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:`w-5 h-5 rounded-full bg-gradient-to-r ${O(R.priority)}`}),t.jsxs("span",{className:"text-slate-700 dark:text-slate-300",children:["Priority: ",R.priority.charAt(0).toUpperCase()+R.priority.slice(1)]})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"p-4 bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800/50 dark:to-slate-700/50 rounded-xl border border-slate-200 dark:border-slate-600",children:[t.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white mb-2",children:"Status"}),t.jsx("div",{className:"inline-flex px-3 py-1 rounded-full text-sm font-medium "+(R.isRead?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400"),children:R.isRead?"Read":"Unread"})]}),R.action&&t.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl border border-blue-200 dark:border-blue-700",children:[t.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white mb-2",children:"Action Required"}),t.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:R.action})]})]})]}),t.jsxs("div",{className:"p-4 bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800/50 dark:to-slate-700/50 rounded-xl border border-slate-200 dark:border-slate-600",children:[t.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white mb-2",children:"Message"}),t.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:R.message})]}),t.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-slate-200 dark:border-slate-600",children:[t.jsx(s,{onClick:()=>T(!1),className:"bg-gradient-to-r from-slate-500 to-slate-600 hover:from-slate-600 hover:to-slate-700 text-white shadow-lg hover:shadow-xl",children:"Close"}),!R.isRead&&t.jsxs(s,{onClick:()=>{H(R.id),T(!1)},className:"bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 text-white shadow-lg hover:shadow-xl",children:[t.jsx(d,{className:"w-4 h-4 mr-2"}),"Mark as Read"]}),R.action&&t.jsx(s,{className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white shadow-lg hover:shadow-xl",children:R.action})]})]})})]})}export{j as NotificationsPage};
